//     Stratus.Models.Provider.js 1.0
//     Copyright (c) 2016 by Sitetheory, All Rights Reserved
//
//     All information contained herein is, and remains the
//     property of Sitetheory and its suppliers, if any.
//     The intellectual and technical concepts contained herein
//     are proprietary to Sitetheory and its suppliers and may be
//     covered by U.S. and Foreign Patents, patents in process,
//     and are protected by trade secret or copyright law.
//     Dissemination of this information or reproduction of this
//     material is strictly forbidden unless prior written
//     permission is obtained from Sitetheory.
//
//     For full details and documentation:
//     http://docs.sitetheory.io
!function(t,e){"function"==typeof define&&define.amd?define(["stratus","angular"],e):e(t.Stratus,t.angular)}(this,function(t,e){t.Models.Provider=["$provide",function(i){i.factory("model",function(i){return function(n,r){this.entity=null,n&&"object"==typeof n&&e.extend(this,n),this.url="/Api",this.attributes={},r&&"object"==typeof r&&e.extend(this.attributes,r),this.entity&&(this.url+="/"+t.Tools.UpperFirst(this.entity));var u=this;this.sync=function(t){var e={method:t||"GET",url:u.get("id")?u.url+"/"+u.get("id"):u.url,headers:{action:t||"GET"}};return i(e)},this.fetch=function(){return new Promise(function(t,e){u.sync().then(function(i){"200"==i.status?(u.meta=i.data.meta||{},u.attributes=i.data.payload||i.data,t(i)):e(i)},e)})},this.get=function(t){return"string"==typeof t&&u.attributes&&"object"==typeof u.attributes?t.split(".").reduce(function(t,e){return t&&t[e]},u.attributes):void 0},this.toggle=function(t,e){return u.get(t)},this.exists=function(t,e){return u.get(t)}}})}]});