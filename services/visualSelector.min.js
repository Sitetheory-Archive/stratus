!function(e,t){"function"==typeof define&&define.amd?define(["stratus","underscore","angular","stratus.services.registry","stratus.services.details","stratus.services.utility"],t):t(e.Stratus,e._,e.angular)}(this,function(e,r,c){e.Services.VisualSelector=["$provide",function(e){e.factory("visualSelector",["$q","$http","$mdPanel","Registry","details","utility",function(e,t,o,a,l,i){return{zoomviewDialog:function(t,e,i){t[i]=e;var s=o.newPanelPosition().absolute().center(),n={attachTo:c.element(document.body),scope:t,controller:["mdPanelRef",function(e){t.closeDialog=function(){e.close()}}],templateUrl:i+".html",hasBackdrop:!0,panelClass:"media-dialog",position:s,trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!1,focusOnOpen:!0};o.open(n)},selectTheme:function(e){return i.sendRequest(e,"POST","/Api/Site")},fetchCollection:function(e,t,i,s){e.registry=new a;var n={target:t.type||s,id:null,manifest:!1,decouple:!0,selectedid:t.selectedid,property:t.property,api:{options:{},limit:r.isJSON(t.limit)?JSON.parse(t.limit):i}};return e.api&&c.isObject(e.api)&&(n.api=r.extendDeep(n.api,e.api)),e.registry.fetch(n,e),e.selectedDetails=new l,e.selectedDetails.fetch(n,e),e}}}])}]});