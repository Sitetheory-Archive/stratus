!function(e,t){"function"==typeof define&&define.amd?define(["stratus","underscore","angular","stratus.services.registry","stratus.services.details","stratus.services.commonMethods"],t):t(e.Stratus,e._,e.angular)}(this,function(e,l,r){e.Services.VisualSelector=["$provide",function(e){e.factory("visualSelector",["$q","$http","$mdPanel","Registry","details","commonMethods",function(e,t,n,a,c,i){return{zoomviewDialog:function(t,e,i){t[i]=e;var s=n.newPanelPosition().absolute().center(),o={attachTo:r.element(document.body),scope:t,controller:["mdPanelRef",function(e){t.closeDialog=function(){e.close()}}],templateUrl:i+".html",hasBackdrop:!0,panelClass:"media-dialog",position:s,trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!1,focusOnOpen:!0};n.open(o)},selectTheme:function(e){return i.sendRequest(e,"POST","/Api/Template")},fetchCollection:function(e,t,i,s){e.registry=new a;var o={target:t.type||s,id:null,manifest:!1,decouple:!0,selectedid:t.selectedid,property:t.property,api:{options:{},limit:l.isJSON(t.limit)?JSON.parse(t.limit):i}};return e.api&&r.isObject(e.api)&&(o.api=l.extendDeep(o.api,e.api)),e.registry.fetch(o,e),e.selectedDetails=new c,e.selectedDetails.fetch(o,e),e}}}])}]});