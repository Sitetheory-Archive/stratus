!function(e,t){"function"==typeof define&&define.amd?define(["stratus","underscore","angular","stratus.services.registry","stratus.services.details","stratus.services.commonMethods"],t):t(e.Stratus,e._)}(this,function(e,t){e.Services.VisualSelector=["$provide",function(e){e.factory("visualSelector",["$q","$http","$mdPanel","Registry","details","commonMethods",function(e,i,s,n,o,a){return{zoomviewDialog:function(e,t,i){e[i]=t;var n=s.newPanelPosition().absolute().center(),o={attachTo:angular.element(document.body),scope:e,controller:["mdPanelRef",function(t){e.closeDialog=function(){t.close()}}],templateUrl:i+".html",hasBackdrop:!0,panelClass:"media-dialog",position:n,trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!1,focusOnOpen:!0};s.open(o)},selectTheme:function(e){return a.sendRequest(e,"POST","/Api/Template")},fetchCollection:function(e,i,s,a){e.registry=new n;var l={target:i.type||a,id:null,manifest:!1,decouple:!0,selectedid:i.selectedid,property:i.property,api:{options:{},limit:t.isJSON(i.limit)?JSON.parse(i.limit):s}};return e.api&&angular.isObject(e.api)&&(l.api=t.extendDeep(l.api,e.api)),e.registry.fetch(l,e),e.selectedDetails=new o,e.selectedDetails.fetch(l,e),e}}}])}]});