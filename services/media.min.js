!function(e,n){"function"==typeof define&&define.amd?define(["stratus","underscore","angular"],n):n(e.Stratus,e._)}(this,function(e,n){e.Services.Media=["$provide",function(e){e.factory("media",["$q","$http","$mdDialog","Upload",function(e,t,i,r){var a="/Api/Tag",o="/Api/Media/";return{dragenter:function(e){$("#main").addClass("blurred")},dragleave:function(e){$("#main").removeClass("blurred")},createTag:function(n){return t({url:a,method:"POST",data:n}).then(function(n){return e.resolve(n)},function(n){return e.reject(n)})},uploadToS3:function(e,t){var i="//app.sitetheory.io:3000/?session="+n.cookie("SITETHEORY")+(t?"&id="+t:"");return r.upload({url:i,method:"POST",data:{AWSAccessKeyId:"AKIAIX32Y3S7HCX4BSQA",key:e.name,acl:"private",policy:"ewogICJleHBpcmF0aW9uIjogIjIwMjAtMDEtMDFUMDA6MDA6MDBaIiwKICAiY29uZGl0aW9ucyI6IFsKICAgIHsiYnVja2V0IjogInNpdGV0aGVvcnljb3JlIn0sCiAgICBbInN0YXJ0cy13aXRoIiwgIiRrZXkiLCAiIl0sCiAgICB7ImFjbCI6ICJwcml2YXRlIn0sCiAgICBbInN0YXJ0cy13aXRoIiwgIiRDb250ZW50LVR5cGUiLCAiIl0sCiAgICBbInN0YXJ0cy13aXRoIiwgIiRmaWxlbmFtZSIsICIiXSwKICAgIFsiY29udGVudC1sZW5ndGgtcmFuZ2UiLCAwLCA1MjQyODgwMDBdCiAgXQp9",signature:"5bz7ETqEC0Gxj1vJP/a6t3DRMJc=","Content-Type":""!=e.type?e.type:"application/octet-stream",filename:e.name,file:e}})},deleteMedia:function(n){return t({method:"DELETE",url:o+n}).then(function(n){return e.resolve(n)},function(n){return e.reject(n)})},updateMedia:function(n,i){return t({method:"PUT",url:o+n,data:i}).then(function(n){return e.resolve(n)},function(n){return e.reject(n)})},getMedia:function(e){return e.collection.fetch()}}}])}]});