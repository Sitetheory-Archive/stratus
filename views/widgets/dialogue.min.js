//     Stratus.Views.Widgets.Generic.js 1.0
//     Copyright (c) 2016 by Sitetheory, All Rights Reserved
//
//     All information contained herein is, and remains the
//     property of Sitetheory and its suppliers, if any.
//     The intellectual and technical concepts contained herein
//     are proprietary to Sitetheory and its suppliers and may be
//     covered by U.S. and Foreign Patents, patents in process,
//     and are protected by trade secret or copyright law.
//     Dissemination of this information or reproduction of this
//     material is strictly forbidden unless prior written
//     permission is obtained from Sitetheory.
//
//     For full details and documentation:
//     http://docs.sitetheory.io
!function(e,t){"function"==typeof define&&define.amd?define(["stratus","jquery","underscore","tether","stratus.views.widgets.base"],t):t(e.Stratus,e.$,e._,e.Tether)}(this,function(e,t,i,n){e.Views.Widgets.Dialogue=e.Views.Widgets.Base.extend({template:i.template("{{ model.id }}"),el:function(){return'[data-collection="'+this.collection.globals.get("uid")+'"][data-entity="'+this.model.collection.globals.get("entity")+'"][data-id="'+this.model.get("id")+'"][data-dialogue="true"]'},events:{click:"open",dblclick:"open"},timestamp:Date.now(),templateRender:"dialogue",tether:null,preOptions:function(e){this.globals=i.has(e,"globals")?e.globals:{},this.widget=i.has(e,"widget")?e.widget:null},onRender:function(e){return this.widget&&this.widget.initializer.done(function(){this.primeTether()}.bind(this)),this},primeTether:function(){this.widget.$el.length?this.tether=new n({element:this.$el.selector,target:this.widget.$el.selector,attachment:"top left",targetAttachment:"top right"}):console.info("dialogue parent didn't render:",this.widget)},refresh:function(){this.primeTether()},onRegister:function(){return t(document).click(function(e){this.$el.notClicked(e)&&this.widget.$el.notClicked(e)&&this.close()}.bind(this)),!0},open:function(){return this.$el.addClass("initializeDialogue")},close:function(){return this.$el.removeClass("initializeDialogue")}})});