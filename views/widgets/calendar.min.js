//     Stratus.Views.Widgets.Calendar.js 1.0
//     Copyright (c) 2016 by Sitetheory, All Rights Reserved
//
//     All information contained herein is, and remains the
//     property of Sitetheory and its suppliers, if any.
//     The intellectual and technical concepts contained herein
//     are proprietary to Sitetheory and its suppliers and may be
//     covered by U.S. and Foreign Patents, patents in process,
//     and are protected by trade secret or copyright law.
//     Dissemination of this information or reproduction of this
//     material is strictly forbidden unless prior written
//     permission is obtained from Sitetheory.
//
//     For full details and documentation:
//     http://docs.sitetheory.io
!function(e,t){"function"==typeof define&&define.amd?define(["stratus","jquery","underscore","moment","stratus.views.widgets.base","fullcalendar"],t):t(e.Stratus,e.$,e._,e.moment)}(this,function(e,t,i,n){e.Views.Widgets.Calendar=e.Views.Widgets.Base.extend({model:e.Models.Generic,template:i.template(""),url:"/Api/",options:{"private":{requiredCssFile:[e.BaseUrl+"sitetheorystratus/stratus/bower_components/fullcalendar/dist/fullcalendar.min.css"]}},onRender:function(e){var t=this;return this.$el.fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},eventLimit:!0,events:function(e,r,a,s){var l=[];i.each(t.collection.toJSON().payload,function(e){l.push({id:e.id,title:e.viewVersion.title,start:n.unix(e.viewVersion.timeCustom||e.viewVersion.timePublish||e.time).format(),url:e.routingPrimary.url,allDay:!0})}),s(l)}}),!0}})});