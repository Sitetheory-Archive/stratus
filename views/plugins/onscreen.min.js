!function(e,s){"function"==typeof define&&define.amd?define(["stratus","zepto","underscore","stratus.views.plugins.base"],s):s(e.Stratus,e.$,e._)}(this,function(e,s,t){e.Views.Plugins.OnScreen=e.Views.Plugins.Base.extend({initialize:function(t){this.prepare(t),e.RegisterGroup.add("OnScroll",{method:e.PluginMethods.CheckOnScreen,el:this.$el,target:this.$el.data("target")?s(this.$el.data("target")):this.$el,spy:this.$el.data("spy")?s(this.$el.data("spy")):this.$el,event:this.$el.data("event")?this.$el.data("event").split(" "):[],offset:this.$el.data("offset")||0,reset:this.$el.data("reset")||0,onScreen:function(){return!t.onScreen||t.onScreen()},offScreen:function(){return!t.offScreen||t.offScreen()}})}}),e.PluginMethods.CheckOnScreen=function(t){var r=e.Environment.get("lastScroll"),a=!1;t.event.indexOf("reset")!==-1&&(t.reset>0&&t.el.offset().top<=t.reset||s(window).scrollTop()<=0)&&(a=!0,t.target.removeClass("onScreen offScreen scrollUp scrollDown reveal unreveal")),a||("down"===r?t.target.addClass("scrollDown").removeClass("scrollUp"):t.target.removeClass("scrollDown"),"up"===r?t.target.addClass("scrollUp").removeClass("scrollDown"):t.target.removeClass("scrollUp"),e.Internals.IsOnScreen(t.spy,t.offset)?(t.target.removeClass("offScreen reveal unreveal").addClass("onScreen onScreenInit"),t.onScreen()):(t.target.removeClass("onScreen").addClass("offScreen"),"down"===r&&t.target.hasClass("reveal")?t.target.removeClass("reveal").addClass("unreveal"):"up"===r&&t.target.removeClass("unreveal").addClass("reveal"),"up"===r&&t.target.hasClass("revealDown")?t.target.removeClass("revealDown").addClass("unrevealDown"):"down"===r&&t.target.removeClass("unrevealDown").addClass("revealDown"),t.offScreen()))}});