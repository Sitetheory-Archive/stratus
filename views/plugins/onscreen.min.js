//     Stratus.Views.Plugins.OnScreen.js 1.0
//     Copyright (c) 2016 by Sitetheory, All Rights Reserved
//
//     All information contained herein is, and remains the
//     property of Sitetheory and its suppliers, if any.
//     The intellectual and technical concepts contained herein
//     are proprietary to Sitetheory and its suppliers and may be
//     covered by U.S. and Foreign Patents, patents in process,
//     and are protected by trade secret or copyright law.
//     Dissemination of this information or reproduction of this
//     material is strictly forbidden unless prior written
//     permission is obtained from Sitetheory.
//
//     For full details and documentation:
//     http://docs.sitetheory.io
!function(e,r){"function"==typeof define&&define.amd?define(["stratus","jquery","underscore","stratus.views.plugins.base"],r):r(e.Stratus,e.$,e._)}(this,function(e,r,n){e.Views.Plugins.OnScreen=e.Views.Plugins.Base.extend({initialize:function(n){this.prepare(n),e.RegisterGroup.add("OnScroll",{method:e.PluginMethods.CheckOnScreen,el:this.$el,target:this.$el.data("target")?r(this.$el.data("target")):this.$el,spy:this.$el.data("spy")?r(this.$el.data("spy")):this.$el,event:this.$el.data("event")?this.$el.data("event").split(" "):[],offset:this.$el.data("offset")||0,reset:this.$el.data("reset")||0,onScreen:function(){return!n.onScreen||n.onScreen()},offScreen:function(){return!n.offScreen||n.offScreen()}})}}),e.PluginMethods.CheckOnScreen=function(t){var s=e.Environment.get("lastScroll"),o=!1;if(t.event.indexOf("reset")!==-1&&(t.reset>0&&t.el.offset().top<=t.reset||r(window).scrollTop()<=0)&&(o=!0,t.target.removeClass("onScreen offScreen scrollUp scrollDown")),!o){"down"===s?t.target.addClass("scrollDown").removeClass("scrollUp"):t.target.removeClass("scrollDown"),"up"===s?t.target.addClass("scrollUp").removeClass("scrollDown"):t.target.removeClass("scrollUp");var l=s&&"up"!==s?"up":"down";e.Internals.IsOnScreen(t.spy,t.offset)?(t.target.removeClass("offScreen offScreenScrollUp offScreenScrollDown").addClass("onScreen onScreenInit"),s&&t.target.addClass("onScreenScroll"+n.ucfirst(s)).removeClass("onScreenScroll"+n.ucfirst(l)),t.onScreen()):(t.target.removeClass("onScreen onScreenScrollUp onScreenScrollDown").addClass("offScreen"),s&&t.target.addClass("offScreenScroll"+n.ucfirst(s)).removeClass("offScreenScroll"+n.ucfirst(l)),t.offScreen())}}});