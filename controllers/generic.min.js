!function(e,a){"function"==typeof define&&define.amd?define(["stratus","underscore","angular","stratus.services.registry"],a):a(e.Stratus,e._)}(this,function(e,a){e.Controllers.Generic=["$scope","$element","$mdToast","$log","$parse","registry",function(n,i,r,t,s,l){if(n.registry=new l,n.registry.fetch(i,n),n.Stratus=e,n.setUrlParams=function(a){if(angular.isObject(a)){var n=!1;angular.forEach(a,function(e){angular.isDefined(e)&&null!==e&&(angular.isString(e)?e.length>0&&(n=!0):n=!0)}),n&&window.location.replace(e.Internals.SetUrlParams(a))}},n.$log=t,n.isArray=angular.isArray,n.isDate=angular.isDate,n.isDefined=angular.isDefined,n.isElement=angular.isElement,n.isFunction=angular.isFunction,n.isNumber=angular.isNumber,n.isObject=angular.isObject,n.isString=angular.isString,n.isUndefined=angular.isUndefined,n.collection){var u={id:i.attr("data-selected"),raw:i.attr("data-raw")};u.id&&angular.isString(u.id)&&(a.isJSON(u.id)?(u.id=JSON.parse(u.id),n.$watch("collection.models",function(e){n.selected||n.selectedInit||angular.forEach(e,function(e){u.id==e.get("id")&&(n.selected=u.raw?e.data:e,n.selectedInit=!0)})})):(u.model=s(u.id),u.value=u.model(n.$parent),angular.isArray(u.value)&&(u.value=u.value.filter(function(e){return e}),u.value.length&&(n.selected=a.first(u.value)))))}e.Instances[a.uniqueId("controller_")]=n}]});