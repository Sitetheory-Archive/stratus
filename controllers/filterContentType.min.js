!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","underscore","angular","stratus.services.filterContentType"],factory):factory(root.Stratus,root._)}(this,function(Stratus,_){Stratus.Controllers.FilterContentType=["$scope","$element","$mdToast","$log","$parse","filterContentType",function($scope,$element,$mdToast,$log,$parse,filterContentType){Stratus.Instances[_.uniqueId("filter_content_type_")]=$scope,$scope.Stratus=Stratus,$scope._=_,$scope.data=filterContentType,$scope.contents=[],$scope.contentTypes=[],$scope.showOnly=[],$scope.$watch("collection.models",function(models){models&&models.length>0&&($scope.contents=$scope.data.contents=models)}),$scope.$watch("collection.meta.attributes.usedContentTypes",function(contentType){contentType&&($scope.contentTypes=contentType)}),$scope.toggle=function(contentType){var index=$scope.showOnly.findIndex(function(x){return x.value===contentType.value});-1!==index?$scope.showOnly.splice(index,1):$scope.showOnly.push(contentType),$scope.showOnly.length>0?($scope.data.contents=[],angular.forEach($scope.contents,function(content){-1!==$scope.showOnly.findIndex(function(x){return x.prompt===content.data.contentType.name})&&$scope.data.contents.push(content)})):$scope.data.contents=$scope.contents},$scope.moreFilter=function(){$scope.more=!$scope.more}}]});