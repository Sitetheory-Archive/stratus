<div id="visual-selector"><div class="selected-layout clearfix"><div class="image-column st-grid st-grid-mobile column50"><div class="selected-image position-anchor background-dark"><div class="image-container default-shadow easy-transition" ng-class="{'galleryimg-active': true}[$ctrl.layoutOption === 'collapsed' && !showGallery]"><img stratus-src="//{{selectedLayout.images[0].prefix}}.{{selectedLayout.images[0].extension}}" alt=""></div><div ng-if="selectedLayout" class="position-center"><a href="#" class="btn" ng-click="displayGallery();">Change Layout</a></div></div></div><div class="selected-info info-column st-grid st-grid-tablet column50"><h4>You are currently using</h4><h2>{{selectedLayout.name}}</h2><hr><p class="description" ng-bind-html="layoutRawDesc(selectedLayout.description) | truncate:{limit:300}"></p><a href="#" class="btn" ng-click="displayGallery();">Change Layout</a></div></div><div id="layout-gallery" class="position-anchor" ng-if="showGallery || $ctrl.layoutOption === 'expanded'"><button type="button" class="btn-close" href="javascript:;" ng-click="closeDialog();"><span class="sr-only">Close Gallery</span> <svg viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><g id="close-{{ id }}" fill="none" transform="translate(1.000000, 2.000000)"><g id="close-x" transform="translate(16.271267, 15.687500)" stroke-linecap="square" stroke="#666"><g id="line-left"><path d="M1.63636364,0.5875 L16.3737342,16.4608762"></path></g><g id="line-right"><path d="M15.8181818,0.5875 L1.08081124,16.4608762"></path></g></g><circle class="oval" stroke="#555" cx="24.7258128" cy="24" r="24"></circle></g></svg></button><h2 class="gallery-title section-header">Profile Layout Gallery</h2><div class="search--gallery" ng-if="$ctrl.search === true"><stratus-search flex="40"></stratus-search></div><div class="gallery-list"><md-grid-list md-cols-xs="1" md-cols-gt-xs="2" md-row-height="3:4" md-row-height-xs="5:9" md-gutter-gt-md="50px" md-gutter-md="40px" md-gutter-sm="30px" md-gutter-gt-xs="0"><md-grid-tile ng-repeat="target in collection.models"><div class="gallery-item position-anchor" ng-class="{'gallerySelected': model.exists(property, target.data.id)}"><h4 class="small-label">{{target.data.name}}</h4><div class="check-icon color-primary easy-transition"><md-icon md-svg-src="/Api/Resource?path=@SitetheoryCoreBundle:images/icons/actionButtons/check.svg"></md-icon></div><div class="background-dark position-anchor"><a href="#" ng-show="$ctrl.details === true" class="info-icon easy-transition" ng-click="zoomView(target.data);"><md-icon md-svg-src="/Api/Resource?path=@SitetheoryCoreBundle:images/icons/actionButtons/info.svg"></md-icon></a><div class="gallery-image default-shadow easy-transition"><div class="selected-border position-all easy-transition"></div><img stratus-src="//{{target.data.images[0].prefix}}.{{target.data.images[0].extension}}" alt=""></div><div class="btn-container position-center"><a href="#" ng-hide="model.exists(property, target.data.id)" ng-click="chooseLayout(property, target.data)" class="btn">Choose Layout</a></div></div></div></md-grid-tile></md-grid-list></div><stratus-pagination class="visual-pag"></stratus-pagination></div></div><script type="text/ng-template" id="layoutDetail.html"><!-- Detail Page starts from here -->
  <div class="layout-dialog" role="dialog">
    <div class="popup clearfix default-border-radius">
      <div class="popup-image image-column st-grid st-grid-tablet column50">
        <div class="default-shadow">
          <a href="javascript:void(0)">
            <img stratus-src="//{{layoutDetail.images[0].prefix}}.{{layoutDetail.images[0].extension}}" alt=""/>
          </a>
        </div>
      </div>
      <div class="popup-info info-column st-grid st-grid-tablet column50">
        <h2>{{layoutDetail.name}}</h2>
        <hr>
        <!-- TODO: Install quickinfo later. Would like two fields: good for and not as good for
                <div class="quick-info">

                    <p class="small-label"><strong>Good for:</strong>&nbsp;&nbsp;Profiles with contact info, lengthy bios and possibly a quote or highlight</p> -->
        <!-- this should show up only if exists. can get cluttered
                    <p class="small-label"><strong>Not so Good for:</strong>&nbsp;&nbsp;Lorem ipsum dolor sit amet</p>
                </div>
                -->
        <p class="description" ng-bind-html="layoutRawDesc(layoutDetail.description) | truncate:{limit:300}"></p>
        <a href="javascript:void(0)" ng-hide="model.exists(property,layoutDetail.id)"
           ng-click="chooseLayout(property, layoutDetail); closeDialog();" class="btn btn-choose">Choose Layout </a>
        <!-- TODO: Install later.
                <hr>
                <p class="small-label"><strong>Other Options</strong></p>

                <div class="popup-form font-body">
                    <input type="checkbox">
                    <label>Apply to all my [profiles]</label>
                </div>
                <div class="popup-form font-body">
                    <input type="checkbox">
                    <label>Apply to [profiles] with these tags</label>
                </div>

                <a class="btn" href="">Apply Layout</a> -->
      </div>
      <div>
        <button type="button" class="btn-close" href="javascript:;" ng-click="closeDialog();">
          <span class="sr-only">Toggle Navigation</span>
          <svg viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg"
               xmlns:xlink="http://www.w3.org/1999/xlink">
            <defs></defs>
            <g id="close-{{ id }}" fill="none" transform="translate(1.000000, 2.000000)">
              <g id="close-x" transform="translate(16.271267, 15.687500)" stroke-linecap="square" stroke="#666">
                <g id="line-left">
                  <path d="M1.63636364,0.5875 L16.3737342,16.4608762"></path>
                </g>
                <g id="line-right">
                  <path d="M15.8181818,0.5875 L1.08081124,16.4608762"></path>
                </g>
              </g>
              <circle class="oval" stroke="#555" cx="24.7258128" cy="24" r="24"></circle>
            </g>
          </svg>
        </button>
      </div>
    </div>
    <!-- Layout popup ends -->
  </div></script>