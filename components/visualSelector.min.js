<<<<<<< 60498210ce2e081b175e23b3c175053a63a69c14
!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","jquery","underscore","angular","angular-material","stratus.services.registry","stratus.services.collection","stratus.services.model","stratus.services.details","stratus.components.search","stratus.components.pagination","stratus.services.commonMethods"],factory):factory(root.Stratus,root.$,root._)}(this,function(Stratus,$,_){Stratus.Components.VisualSelector={bindings:{elementId:"@",ngModel:"=",property:"@",type:"@",limit:"@",multiple:"<",layoutOption:"@",details:"<",search:"<"},controller:function($scope,$mdPanel,$attrs,registry,details,model,$http,$sce,commonMethods,$filter){function ZoomController(mdPanelRef){$scope.closeDialog=function(){mdPanelRef.close()}}commonMethods.componentInitializer(this,$scope,$attrs,"visual_selector",!0);var $ctrl=this;if($ctrl.layoutData=null,$ctrl.selectedLayoutData=null,$scope.showGallery=!1,$scope.galleryClass="fa fa-plus",$scope.api=!!_.isJSON($attrs.api)&&JSON.parse($attrs.api),$scope.$watch("[model.data.version.layout.id, collection.models]",function(layout){layout[0]&&layout[1]&&layout[1].length>0&&($ctrl.layoutData=layout[1].map(function(obj){return obj.data}),$ctrl.selectedLayoutData=$filter("filter")($ctrl.layoutData,{id:layout[0]})[0],$scope.selectedName=$ctrl.selectedLayoutData.name,$scope.selectedDesc=$ctrl.selectedLayoutData.description)}),$attrs.type){$scope.registry=new registry;var request={target:$attrs.type||"Layout",id:null,manifest:!1,decouple:!0,selectedId:$attrs.selectedId,property:$attrs.property,api:{options:{},limit:_.isJSON($attrs.limit)?JSON.parse($attrs.limit):40}};$scope.api&&angular.isObject($scope.api)&&(request.api=_.extendDeep(request.api,$scope.api)),$scope.registry.fetch(request,$scope),$scope.selectedDetails=new details,$scope.selectedDetails.fetch(request,$scope)}$scope.property=$attrs.property||null,$scope.toggleOptions={multiple:!!_.isJSON($attrs.multiple)&&JSON.parse($attrs.multiple)},$scope.model=null,$scope.$watch("$ctrl.ngModel",function(data){data instanceof model&&data!==$scope.model&&($scope.model=data)}),$scope.layoutRawDesc=function(plainText){return $sce.trustAsHtml(plainText)},$scope.selectedName=null,$scope.selectedDesc=null,$scope.updateDetails=function(options){Stratus.Environment.get("production")||console.log(options.description),$scope.selectedName=options.name,$scope.selectedDesc=options.description},$scope.displayGallery=function(){$scope.showGallery=!0,$scope.galleryClass="fa fa-minus"},$scope.zoomView=function(layoutDetail){$scope.layoutDetail=layoutDetail;var position=$mdPanel.newPanelPosition().absolute().center(),config={attachTo:angular.element(document.body),scope:$scope,controller:ZoomController,templateUrl:"layoutDetail.html",hasBackdrop:!0,panelClass:"media-dialog",position:position,trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!1,focusOnOpen:!0};$mdPanel.open(config)},$scope.toggleGallery=function(){!0===$scope.showGallery?($scope.galleryClass="fa fa-plus",$scope.showGallery=!1):!1===$scope.showGallery&&($scope.galleryClass="fa fa-minus",$scope.showGallery=!0)}},templateUrl:Stratus.BaseUrl+"sitetheorystratus/stratus/components/visualSelector"+(Stratus.Environment.get("production")?".min":"")+".html"}});
=======
!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","jquery","underscore","angular","angular-material","stratus.services.registry","stratus.services.collection","stratus.services.model","stratus.services.details","stratus.components.search","stratus.components.pagination","stratus.services.commonMethods"],factory):factory(root.Stratus,root.$,root._)}(this,function(Stratus,$,_){Stratus.Components.VisualSelector={bindings:{elementId:"@",ngModel:"=",property:"@",type:"@",limit:"@",multiple:"<",layoutOption:"@",details:"<",search:"<"},controller:function($scope,$mdPanel,$attrs,registry,details,model,$http,$sce,commonMethods){if(commonMethods.componentInitializer(this,$scope,$attrs,"visual_selector",!0),$scope.showGallery=!1,$scope.galleryClass="fa fa-plus",$scope.api=!!_.isJSON($attrs.api)&&JSON.parse($attrs.api),$attrs.type){$scope.registry=new registry;var request={target:$attrs.type||"Layout",id:null,manifest:!1,decouple:!0,selectedid:$attrs.selectedid,property:$attrs.property,api:{options:{},limit:_.isJSON($attrs.limit)?JSON.parse($attrs.limit):40}};$scope.api&&angular.isObject($scope.api)&&(request.api=_.extendDeep(request.api,$scope.api)),$scope.registry.fetch(request,$scope),$scope.selectedDetails=new details,$scope.selectedDetails.fetch(request,$scope)}$scope.property=$attrs.property||null,$scope.toggleOptions={multiple:!!_.isJSON($attrs.multiple)&&JSON.parse($attrs.multiple)},$scope.model=null,$scope.$watch("$ctrl.ngModel",function(data){data instanceof model&&data!==$scope.model&&($scope.model=data)}),$scope.layoutRawDesc=function(plainText){return $sce.trustAsHtml(plainText)},$scope.selectedName=null,$scope.selectedDesc=null,$scope.updateDetails=function(options){Stratus.Environment.get("production")||console.log(options.description),$scope.selectedName=options.name,$scope.selectedDesc=options.description},$scope.displayGallery=function(){$scope.showGallery=!0,$scope.galleryClass="fa fa-minus"},$scope.zoomView=function(layoutDetail){$scope.layoutDetail=layoutDetail;var position=$mdPanel.newPanelPosition().absolute().center(),config={attachTo:angular.element(document.body),scope:$scope,controller:ZoomController,templateUrl:"layoutDetail.html",hasBackdrop:!0,panelClass:"media-dialog",position:position,trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!1,focusOnOpen:!0};$mdPanel.open(config)};function ZoomController(mdPanelRef){$scope.closeDialog=function(){mdPanelRef.close()}}$scope.toggleGallery=function(){!0===$scope.showGallery?($scope.galleryClass="fa fa-plus",$scope.showGallery=!1):!1===$scope.showGallery&&($scope.galleryClass="fa fa-minus",$scope.showGallery=!0)}},templateUrl:Stratus.BaseUrl+"sitetheorystratus/stratus/components/visualSelector"+(Stratus.Environment.get("production")?".min":"")+".html"}});
>>>>>>> build after merging
