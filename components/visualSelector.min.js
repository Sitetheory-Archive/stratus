!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","jquery","underscore","angular","angular-material","stratus.services.collection","stratus.components.search","stratus.components.pagination"],factory):factory(root.Stratus,root.$,root._)}(this,function(Stratus,$,_){Stratus.Components.VisualSelector={bindings:{ngModel:"=",layoutOption:"@",details:"<",search:"<",target:"@",limit:"@",multiple:"<"},controller:function($scope,$mdPanel,$attrs,registry){function ZoomController(mdPanelRef){$scope.closeDialog=function(){mdPanelRef.close()}}Stratus.Internals.CssLoader(Stratus.BaseUrl+"sitetheorystratus/stratus/components/visualSelector"+(Stratus.Environment.get("production")?".min":"")+".css"),$scope.showGallery=!1,$scope.selectListArr=[],$scope.galleryClass="fa fa-plus",$scope.registry=new registry,$scope.registry.fetch({target:$attrs.target||"Layout",id:null,manifest:!1,decouple:!0,api:{options:{},limit:_.isJSON($attrs.limit)?JSON.parse($attrs.limit):3}},$scope),$scope.$watch("$ctrl.ngModel",function(data){_.isUndefined(data)||_.isEqual($scope.selectListArr,data)||($scope.selectListArr=data||[])}),$scope.$watch("selectListArr",function(data){!_.isArray(data)||_.isUndefined($scope.$ctrl.ngModel)||_.isEqual($scope.selectListArr,$scope.$ctrl.ngModel)||($scope.$ctrl.ngModel=$scope.selectListArr)},!0),$scope.displayGallery=function(){$scope.showGallery=!0},$scope.zoomView=function(layoutDetail){$scope.layoutDetail=layoutDetail;var position=$mdPanel.newPanelPosition().absolute().center(),config={attachTo:angular.element(document.body),scope:$scope,controller:ZoomController,templateUrl:"layoutDetail.html",hasBackdrop:!0,panelClass:"media-dialog",position:position,trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!1,focusOnOpen:!0};$mdPanel.open(config)},$scope.chooseLayout=function(selectedData,$event){$scope.selected=selectedData,$scope.selectListArr=[],$scope.selectListArr.push(selectedData)},$scope.isSelected=function(item){return $scope.selected===item},$scope.toggleGallery=function(){$scope.showGallery===!0?($scope.galleryClass="fa fa-plus",$scope.showGallery=!1):$scope.showGallery===!1&&($scope.galleryClass="fa fa-minus",$scope.showGallery=!0)},$scope.removeSelected=function(selectedLayout){var index=$scope.selectListArr.indexOf(selectedLayout);index>=0&&($scope.selectListArr.splice(index,1),$scope.selected={})},$scope.checkSelected=function(selectedLayout){console.log("second");var index=$scope.selectListArr.indexOf(selectedLayout);return index>=0}},templateUrl:Stratus.BaseUrl+"sitetheorystratus/stratus/components/visualSelector"+(Stratus.Environment.get("production")?".min":"")+".html"}});