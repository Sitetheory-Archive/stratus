!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","underscore","angular","angular-material","stratus.services.commonMethods"],factory):factory(root.Stratus,root._)}(this,function(Stratus,_){Stratus.Components.Tag={bindings:{ngModel:"=",collection:"<"},controller:function($scope,$parse,$attrs,commonMethods){commonMethods.componentInitializer(this,$scope,$attrs,"tag",!0);var $ctrl=this;$ctrl.selectedChips=[],$ctrl.collection=[],$ctrl.queryText="",$scope.$watch("$ctrl.ngModel",function(items){$ctrl.selectedChips=items||[]}),$scope.$watch("$ctrl.collection",function(data){$ctrl.collection=data}),$ctrl.queryData=function(){var results=$ctrl.collection.filter($ctrl.queryText);return Promise.resolve(results).then(function(value){return value.filter(function(item){return-1===$ctrl.selectedChips.indexOf(item.name)})})},$ctrl.transformChip=function(chip){return angular.isObject(chip)?chip:{name:chip}},$ctrl.createTag=function(){$ctrl.selectedChips.push($ctrl.transformChip($ctrl.queryText)),$ctrl.queryText=null,$("input").blur()}},templateUrl:Stratus.BaseUrl+"sitetheorystratus/stratus/components/tag"+(Stratus.Environment.production?".min":"")+".html"}});