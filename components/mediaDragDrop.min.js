!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","jquery","underscore","angular","angular-material","stratus.services.commonMethods","stratus.services.media"],factory):factory(root.Stratus,root.$,root._)}(this,function(Stratus,$,_,angular){Stratus.Components.MediaDragDrop={controller:function($scope,$mdDialog,$attrs,commonMethods,media){commonMethods.componentInitializer(this,$scope,$attrs,"media_drag_drop",!0);angular.element(document.body).hasClass("md-dialog-is-showing");$scope.files=[],document.addEventListener("dragenter",media.dragenter,!1),document.addEventListener("dragleave",media.dragleave,!1),document.addEventListener("drop",function(event){angular.element(document.body).hasClass("md-dialog-is-showing")||($scope.files=$scope.files.concat(Array.from(event.dataTransfer.files)),$mdDialog.show({controller:DialogController,locals:{files:event.dataTransfer.files},templateUrl:Stratus.BaseUrl+"sitetheorystratus/stratus/components/mediaDragDropDialog"+(Stratus.Environment.get("production")?".min":"")+".html",parent:angular.element(document.body),clickOutsideToClose:!1}))},!1),$(window).focus(function(){$(".drag-drop").removeClass("show-overlay")}).blur(function(){$(".drag-drop").addClass("show-overlay")});function DialogController($scope,files){$scope.files=files,$scope.done=function(){$mdDialog.hide(),dragleave()},$scope.cancel=function(){$mdDialog.cancel(),dragleave()},$scope.addFiles=function(newFiles){newFiles.length>0&&($scope.files=Array.from($scope.files).concat(newFiles))},$scope.removeFiles=function(file){$scope.files=_.without($scope.files,file)},$scope.$watch("files",function(oldFiles,newFiles){console.log(oldFiles),console.log(newFiles)})}},templateUrl:Stratus.BaseUrl+"sitetheorystratus/stratus/components/mediaDragDrop"+(Stratus.Environment.get("production")?".min":"")+".html"}});