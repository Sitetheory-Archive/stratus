<div layout="row" flex="100" ng-repeat="permission in $ctrl.ngModel.models">
    <div flex
         ng-controller="Generic"
         data-raw="true"
         data-target="User">
        <md-autocomplete
                md-menu-class="autocomplete-custom-template"
                md-selected-item="selected"
                md-search-text="query"
                md-items="user in collection.filter(query)"
                md-no-cache="true"
                md-autoselect="true"
                md-floating-label="User or Role"
                placeholder="Choose an Identity">
            <md-item-template>
                <div class="contact-item" layout="row">
                    <img ng-src="{{ user.email | gravatar }}" class="md-avatar" alt="{{ user.bestName }}"/>
                    <div flex class="md-list-item-text compact">
                        <p class="md-contact-name" md-highlight-text="true" md-highlight-flags="i">
                            {{ user.bestName }}
                        </p>
                        <p class="md-contact-email">
                            {{ user.email }}
                        </p>
                    </div>
                </div>
            </md-item-template>
        </md-autocomplete>
    </div>
    <div flex
         ng-controller="Generic"
         data-raw="true"
         data-target="ContentType">
        <md-autocomplete
                md-menu-class="autocomplete-custom-template"
                md-selected-item="selected"
                md-search-text="query"
                md-items="contentType in collection.filter(query)"
                md-no-cache="true"
                md-autoselect="true"
                md-floating-label="Content"
                placeholder="Choose an Asset">
            <md-item-template>
                <div class="contact-item" layout="row">
                    <div flex class="md-list-item-text compact">
                        <p>
                            {{ contentType.name }}
                        </p>
                    </div>
                </div>
            </md-item-template>
        </md-autocomplete>
    </div>
    <div flex layout-align="center center" layout="column">
        <md-menu>
            <a ng-click="$mdOpenMenu($event)" aria-label="Choose Permissions" href="#">
                Total: {{ sentinel.permissions() }}
                <div class="caret"></div>
            </a>
            <md-menu-content width="3">

                <md-menu-item ng-show="!sentinel.master">
                    <md-checkbox ng-model="sentinel.view" aria-label="View">
                        View
                    </md-checkbox>
                </md-menu-item>

                <md-menu-item ng-show="!sentinel.master">
                    <md-checkbox ng-model="sentinel.create" aria-label="Create">
                        Create
                    </md-checkbox>
                </md-menu-item>

                <md-menu-item ng-show="!sentinel.master">
                    <md-checkbox ng-model="sentinel.edit" aria-label="Edit">
                        Edit
                    </md-checkbox>
                </md-menu-item>

                <md-menu-item ng-show="!sentinel.master">
                    <md-checkbox ng-model="sentinel.delete" aria-label="Delete">
                        Delete
                    </md-checkbox>
                </md-menu-item>

                <md-menu-item ng-show="!sentinel.master">
                    <md-checkbox ng-model="sentinel.publish" aria-label="Publish">
                        Publish
                    </md-checkbox>
                </md-menu-item>

                <md-menu-item ng-show="!sentinel.master">
                    <md-checkbox ng-model="sentinel.design" aria-label="Design">
                        Design
                    </md-checkbox>
                </md-menu-item>

                <md-menu-item ng-show="!sentinel.master">
                    <md-checkbox ng-model="sentinel.dev" aria-label="Dev">
                        Dev
                    </md-checkbox>
                </md-menu-item>

                <md-menu-divider ng-show="!sentinel.master"></md-menu-divider>

                <md-menu-item>
                    <md-checkbox ng-model="sentinel.master" aria-label="Master">
                        Master
                    </md-checkbox>
                </md-menu-item>
            </md-menu-content>
        </md-menu>
    </div>
    <md-button flex ng-if="$last" ng-click="collection.add()">+</md-button>
</div>