!function(a,e){"function"==typeof define&&define.amd?define(["stratus","underscore","swiper","angular"],e):e(a.Stratus,a._,a.Swiper)}(this,function(a,e,i){a.Components.Carousel={bindings:{elementId:"@",initNow:"=",images:"@",imageLinkTarget:"@",direction:"@",transitionEffect:"@",roundLengths:"@",loop:"@",autoHeight:"@",autoplay:"@",autoplayDelay:"@",lazyLoad:"@",navigation:"@",pagination:"@",scrollbar:"@"},controller:["$scope","$attrs","$window","$element","utility",function(t,n,o,r,s){a.Internals.CssLoader(a.BaseUrl+a.BundlePath+"bower_components/swiper/dist/css/swiper"+(a.Environment.get("production")?".min":"")+".css"),s.componentInitializer(this,t,n,"carousel",!0),t.initialized=!1;let l=this;function p(){let a=n.images&&e.isJSON(n.images)?JSON.parse(n.images):[];t.imageLinkTarget=n.imageLinkTarget?n.imageLinkTarget:null,t.direction=n.loop&&"vertical"===n.loop?"vertical":"horizontal",t.transitionEffect=n.transitionEffect?n.transitionEffect:"slide",t.roundLengths=!n.roundLengths||!e.isJSON(n.roundLengths)||JSON.parse(n.roundLengths),t.loop=!n.loop||!e.isJSON(n.loop)||JSON.parse(n.loop),t.gallery=!(!n.gallery||!e.isJSON(n.gallery))&&JSON.parse(n.gallery),t.gallery&&(t.loop=!1),t.scaleHeight=!n.scaleHeight||!e.isJSON(n.scaleHeight)||JSON.parse(n.scaleHeight),t.allowZoom=!(!n.allowZoom||!e.isJSON(n.allowZoom))&&JSON.parse(n.allowZoom),t.scaleHeight=t.scaleHeight||t.allowZoom,t.stretchWidth=!(!n.stretchWidth||!e.isJSON(n.stretchWidth))&&JSON.parse(n.stretchWidth),t.autoHeight=!(!n.autoHeight||!e.isJSON(n.autoHeight))&&JSON.parse(n.autoHeight),t.autoplay=!(!n.autoplay||!e.isJSON(n.autoplay))&&JSON.parse(n.autoplay),t.allowTouchMove=!n.allowTouchMove||!e.isJSON(n.allowTouchMove)||JSON.parse(n.allowTouchMove),t.transitionDelay=n.transitionDelay&&e.isJSON(n.transitionDelay)?JSON.parse(n.transitionDelay):3e3,t.lazyLoad=n.lazyLoad&&e.isJSON(n.lazyLoad)?JSON.parse(n.lazyLoad):{},t.navigation=!n.navigation||!e.isJSON(n.navigation)||JSON.parse(n.navigation),t.pagination=!(!n.pagination||!e.isJSON(n.pagination))&&JSON.parse(n.pagination),t.scrollbar=!(!n.scrollbar||!e.isJSON(n.scrollbar))&&JSON.parse(n.scrollbar),function(a){"string"==typeof a&&(a=[a]);if(e.isArray(a)){let e=[];a.forEach(function(a){let i={};"string"==typeof a?i.src=a:"object"==typeof a&&a.hasOwnProperty("src")&&(i=a),Object.keys(i).length>0&&e.push(i)}),e.length>0&&(t.images=e,t.images.length<2&&(t.loop=!1,t.allowTouchMove=!1))}}(a),function(){l.swiperContainer=r[0].getElementsByClassName("swiper-main")[0].getElementsByClassName("swiper-container")[0],l.swiperParameters={direction:t.direction,zoom:t.allowZoom,loop:t.loop,effect:t.transitionEffect,autoHeight:t.autoHeight,allowTouchMove:t.allowTouchMove},t.navigation&&(l.swiperNextEl=l.swiperContainer.getElementsByClassName("swiper-button-next")[0],l.swiperPrevEl=l.swiperContainer.getElementsByClassName("swiper-button-prev")[0],l.swiperParameters.navigation={nextEl:l.swiperNextEl,prevEl:l.swiperPrevEl});if(t.pagination){if(l.swiperParameters.pagination={},"object"==typeof t.pagination&&(t.pagination.hasOwnProperty("el")&&(l.swiperPaginationEl=l.swiperContainer.getElementsByClassName(t.pagination.el)[0]),t.pagination.hasOwnProperty("clickable")&&(l.swiperParameters.pagination.clickable=t.pagination.clickable),t.pagination.hasOwnProperty("dynamicBullets")&&(l.swiperParameters.pagination.dynamicBullets=t.pagination.dynamicBullets),t.pagination.hasOwnProperty("dynamicMainBullets")&&(l.swiperParameters.pagination.dynamicMainBullets=t.pagination.dynamicMainBullets),t.pagination.hasOwnProperty("render")))switch(t.pagination.render){case"fraction":l.swiperParameters.pagination.type="fraction";break;case"customFraction":l.swiperParameters.pagination.type="fraction",l.swiperParameters.pagination.renderFraction=function(a,e){return'<span class="'+a+'"></span> of <span class="'+e+'"></span>'};break;case"progressbarOpposite":l.swiperParameters.pagination.progressbarOpposite=!0,l.swiperParameters.pagination.type="progressbar";break;case"progressbar":l.swiperParameters.pagination.type="progressbar";break;case"numberBullet":l.swiperParameters.pagination.renderBullet=function(a,e){return'<span class="'+e+' swiper-pagination-number-bullet">'+(a+1)+"</span>"};break;case"bullet":default:l.swiperParameters.pagination.type="bullet"}l.swiperPaginationEl||(l.swiperPaginationEl=l.swiperContainer.getElementsByClassName("swiper-pagination")[0]),l.swiperParameters.pagination.el=l.swiperPaginationEl}t.scrollbar&&(l.swiperScrollbarEl=l.swiperContainer.getElementsByClassName("swiper-scrollbar")[0],l.swiperParameters.scrollbar={el:l.swiperScrollbarEl});t.autoplay&&(!0===t.autoplay&&(t.autoplay={delay:t.transitionDelay,disableOnInteraction:!1}),!t.loop&&t.autoplay&&("boolean"==typeof t.autoplay&&(t.autoplay={}),t.autoplay.hasOwnProperty("stopOnLastSlide")||(t.autoplay.stopOnLastSlide=!0)),l.swiperParameters.autoplay=t.autoplay);t.lazyLoad&&(!0===t.lazyLoad&&(t.lazyLoad={}),t.lazyLoad&&!t.lazyLoad.hasOwnProperty("loadPrevNext")&&(t.lazyLoad.loadPrevNext=!0),t.lazyLoad&&!t.lazyLoad.hasOwnProperty("loadPrevNextAmount")&&(t.lazyLoad.loadPrevNextAmount=1),t.lazyLoad&&!t.lazyLoad.hasOwnProperty("loadOnTransitionStart")&&(t.lazyLoad.loadOnTransitionStart=!0),l.swiperParameters.lazy=t.lazyLoad,l.swiperParameters.preloadImages=!1);t.$applyAsync(function(){l.swiper=new i(l.swiperContainer,l.swiperParameters),t.gallery&&(l.galleryContainer=r[0].getElementsByClassName("swiper-gallery")[0].getElementsByClassName("swiper-container")[0],l.gallerySwiper=new i(l.galleryContainer,{direction:"horizontal",effect:"slide",preloadImages:!1,spaceBetween:10,centeredSlides:!0,slidesPerView:8,touchRatio:.2,slideToClickedSlide:!0}),l.swiper.controller.control=l.gallerySwiper,l.gallerySwiper.controller.control=l.swiper)})}(),t.initialized=!0}l.$onInit=function(){let a=!0;n.$attr.hasOwnProperty("initNow")&&(a=!!e.isJSON(n.initNow)&&JSON.parse(n.initNow)),a?p():l.stopWatchingInitNow=t.$watch("$ctrl.initNow",function(a){!0===a&&(t.initialized||p(),l.stopWatchingInitNow())})},t.imageClick=function(a){a&&a.hasOwnProperty("link")&&o.open(a.link,t.imageLinkTarget||a.target||"_self")}}],templateUrl:a.BaseUrl+a.BundlePath+"components/carousel"+(a.Environment.get("production")?".min":"")+".html"}});