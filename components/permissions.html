<div class="option-row">
  <div class="select-options"
    ng-controller="Generic"
    data-raw="true"
    data-target="User"
    data-api='{"options":{"type":"collection"}}'>
    <md-autocomplete
        md-min-length="0"
        md-delay="500"
        md-menu-class="autocomplete-custom-template"
        md-search-text="query"
        md-items="item in permissionQuery(collection, query)"
        md-selected-item-change="selectedUserRoleChange(item)"
        md-item-text="item.name || item.bestName"
        md-no-cache="true"
        md-floating-label="User and Role *"
        placeholder="Choose an Identity">

      <md-item-template>
        <div layout="row" layout-wrap layout-align="space-between center">
          <div class="contact-item">
            <img src="http://pluspng.com/img-png/png-user-icon-male-user-icon-512.png" alt="">
          </div>
          <p class="md-contact-name" md-highlight-text="true" md-highlight-flags="i" flex="60">
            {{ item.bestName || item.name }}
          </p>
        </div>
      </md-item-template>
    </md-autocomplete>

  </div>

  <div class="select-options"
    ng-controller="Generic"
    data-raw="true"
    data-target="Content *"
    data-api='{"options":{"type":"collection"}}'>
    <md-autocomplete
        md-min-length="0"
        md-delay="500"
        md-menu-class="autocomplete-custom-template"
        md-search-text="query"
        md-items="content in collection.filter(query)"
        md-selected-item-change="selectedContentChange(content)"
        md-item-text="content.version.title"
        md-no-cache="true"
        md-floating-label="Content"
        placeholder="Choose an Identity">

      <md-item-template>
        <div layout="row" layout-align="space-between center">
          <div class="contact-item">
            <img ng-src="{{content.version.images[0] ? 'http://' + content.version.images[0].prefix + '.' + content.version.images[0].extension : null}}" class="md-avatar" alt="(>:<)"/>
          </div>
          <div >
            <p class="md-contact-name" md-highlight-text="true" md-highlight-flags="i">
              {{ content.version.title|limitTo:10 }}
            </p>
          </div>
        </div>
      </md-item-template>
    </md-autocomplete>
  </div>

  <div class="select-options">
    <md-input-container>
      <label>Actions</label>
      <md-select ng-model="permissionSelected" ng-change="processSelectAction()" md-on-close="clearSearchTerm()" md-on-open="loadPermissions()" data-md-container-class="selectdemoSelectHeader" multiple="">
        <md-select-header class="demo-select-header">
          <input ng-model="permissionSearchTerm" type="search" placeholder="Search for a action.." class="demo-header-searchbox md-text">
        </md-select-header>
        <md-optgroup label="vegetables">
          <md-option ng-value="permission.value" ng-repeat="permission in permissions" ng-selected="permissionSelected.indexOf(permission.value) != -1">{{permission.name}}</md-option>
        </md-optgroup>
      </md-select>
    </md-input-container>
  </div>
</div>

<div class="submit" ng-show="(userRoleSelected && contentSelected && permissionSelected)">
  <md-button class="md-raised" ng-click=submit()> Submit </md-button>
</div>
