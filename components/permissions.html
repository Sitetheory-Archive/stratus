<div class="option-row">
  <div class="select-options"
    ng-controller="Generic"
    data-raw="true"
    data-target="User"
    data-api='{"options":{"type":"collection"}}'>
    <md-autocomplete
        md-min-length="0"
        md-delay="500"
        md-menu-class="autocomplete-custom-template"
        md-selected-item="permission.identityUser"
        md-search-text="query"
        md-items="user in collection.filter(query)"
        md-item-text="user.username"
        md-no-cache="true"
        md-autoselect="true"
        md-floating-label="User"
        placeholder="Choose an Identity">

        <div layout="row" layout-align="space-between center">
          <div class="contact-item">
            <img ng-src="{{ user.email | gravatar }}" class="md-avatar" alt="{{ user.bestName }}"/>
          </div>
          <div >
            <p class="md-contact-name" md-highlight-text="true" md-highlight-flags="i">
              {{ user.bestName }}
            </p>
          </div>
        </div>
      </md-item-template>
    </md-autocomplete>
  </div>

  <div class="select-options"
    ng-controller="Generic"
    data-raw="true"
    data-target="Content"
    data-api='{"options":{"type":"collection"}}'>
    <md-autocomplete
        md-min-length="0"
        md-delay="500"
        md-menu-class="autocomplete-custom-template"
        md-selected-item="permission.identityUser"
        md-search-text="query"
        md-items="content in collection.filter(query)"
        md-item-text="content.version.title"
        md-no-cache="true"
        md-autoselect="true"
        md-floating-label="Content"
        placeholder="Choose an Identity">

        <div layout="row" layout-align="space-between center">
          <div class="contact-item">
            <!-- <img src="https://cdn.sitetheory.io/nest001/2415/018-eddy-asf_poster_950x5000.png" class="md-avatar" alt="(>:<)"/> -->
            <img ng-src="{{content.version.images[0] ? 'http://' + content.version.images[0].prefix + '.' + content.version.images[0].extension : null}}" class="md-avatar" alt="(>:<)"/>
          </div>
          <div >
            <p class="md-contact-name" md-highlight-text="true" md-highlight-flags="i">
              {{ content.version.title|limitTo:10 }}
            </p>
          </div>
        </div>
      </md-item-template>
    </md-autocomplete>
  </div>

  <div class="select-options">
    <md-input-container>
      <label>Actions</label>
      <md-select ng-model="permissionSelected" ng-change="processSelectAction()" md-on-close="clearSearchTerm()" data-md-container-class="selectdemoSelectHeader" md-on-open="loadPermissions()" multiple="">
        <md-select-header class="demo-select-header">
          <input ng-model="permissionSearchTerm" type="search" placeholder="Search for a action.." class="demo-header-searchbox md-text">
        </md-select-header>
        <md-optgroup label="vegetables">
          <md-option ng-value="permission.value" ng-repeat="permission in permissions" ng-selected="permissionSelected.indexOf(permission.value) != -1">{{permission.name}}</md-option>
        </md-optgroup>
      </md-select>
    </md-input-container>
  </div>
</div>

<div class="submit">
  <md-button class="md-raised" ng-click=submit()> Submit </md-button>
</div>
