!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","underscore","angular","angular-material"],factory):factory(root.Stratus,root._)}(this,function(Stratus,_){Stratus.Components.Facebook={bindings:{pageId:"@",appId:"@",token:"@"},controller:function($scope,$http){function resizePlugin(){var plugin=document.querySelector(".fb-page"),containerSpan=plugin.querySelector("span");containerSpan.style.width="100%";var iframe=plugin.querySelector("iframe");iframe.width="100%",iframe.style.width="100%";var maxWidth=500,width=container.offsetWidth;if(width>maxWidth){var scale=width/maxWidth;iframe.style.transform="scale("+scale+")",iframe.style["transform-origin"]="0 0"}}function loadPlugin(){var height=relatedContainer.offsetHeight;height=height>0?height+relatedContainerOffset:height;var width=container.offsetWidth,minHeight=500,minWidth=500;height=height<minHeight?minHeight:height,width=width<minWidth?minWidth:width;for(var content='<div class="fb-page" data-href="https://www.facebook.com/'+facebookPageId+'" data-tabs="timeline" data-width="'+width+'" data-height="'+height+'" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"></div><blockquote cite="https://www.facebook.com/'+facebookPageId+'" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/'+facebookPageId+'">'+facebookPageName+"</a></blockquote>";container.firstChild;)container.removeChild(container.firstChild);container.innerHTML=content,FB.XFBML.parse()}Stratus.Instances[_.uniqueId("facebook_")]=$scope;var loadJob,facebookPageName="Brand New Congress",facebookPageId="brandnewcongress",containerId="facebookPageContainer",relatedContainerId="currentMediaContainer",relatedContainerOffset=-150,container=document.getElementById(containerId),relatedContainer=document.getElementById(relatedContainerId||containerId);FB.Event.subscribe("xfbml.render",function(){resizePlugin()}),loadJob=Stratus.Chronos.add(.2,function(){relatedContainer.offsetHeight>0&&(Stratus.Chronos.disable(loadJob),loadPlugin())},this),Stratus.Chronos.enable(loadJob),window.onresize=function(){loadPlugin()},$scope.$watch("bindings",function(){})},template:""}});