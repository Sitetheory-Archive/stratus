//     Stratus.Components.Publish.js 1.0
//     Copyright (c) 2016 by Sitetheory, All Rights Reserved
//
//     All information contained herein is, and remains the
//     property of Sitetheory and its suppliers, if any.
//     The intellectual and technical concepts contained herein
//     are proprietary to Sitetheory and its suppliers and may be
//     covered by U.S. and Foreign Patents, patents in process,
//     and are protected by trade secret or copyright law.
//     Dissemination of this information or reproduction of this
//     material is strictly forbidden unless prior written
//     permission is obtained from Sitetheory.
//
//     For full details and documentation:
//     http://docs.sitetheory.io
-function(root,factory){"function"==typeof define&&define.amd?define(["stratus","moment","zepto","angular","stratus.components.dateTime"],factory):factory(root.Stratus,root.moment,root.$)}(this,function(Stratus,moment,$){Stratus.Components.Publish={bindings:{ngModel:"=",elementId:"@",versionEntity:"@",action:"@",showDateTime:"@",showUnpublish:"@",showVersionHistory:"@",redirect:"@"},controller:function($scope,$element,$parse,$attrs,$log){var uid=_.uniqueId("publish_");return Stratus.Instances[uid]=$scope,$scope.model=$scope.$parent.model,$scope.versionEntity=$attrs.versionEntity||null,$log.log("model:",$scope.model),!0},template:'<div ng-if="model.has(versionEntity)" class="customFontPrimary btn-group">                <md-button aria-label="Publish" id="{{ elementId }}" class="btn btnPublish btnPublishNow"                    ng-click="setTimePublish()"                    ng-class="{published: version.isPublished == 1, unpublished: version.isPublished != 1}">                    <div class="btnGradientLight"></div>                    <md-icon class="publishIcon" md-svg-src="/Api/Resource?path=@SitetheoryCoreBundle:images/icons/actionButtons/publish.svg"></md-icon>                    <span class="publishText">Publish</span>                </md-button>                <md-menu ng-if="showMore">                    <div id="dropdownBtn-{{ elementId }}" class="btn btnPublish btnPublishMore">                        <div class="btnGradientLight"></div>                        <span class="caret"></span>                    </div>                    <md-menu-content class="btnPublishDropdown" aria-labelledby="dropdownBtn-{{ elementId }}">                        <!-- TODO: after converting to dateTime component make sure these options are not needed anymore-->                        <stratus-date-time ng-if="showDateTime"                         ng-model="timePublish"                        data-usecurrent="false"                        data-defaultTimestamp="{{ timePublish || null }}"                         data-style="widget"></stratus-date-time>                        <div ng-if="showUnpublish">                            <md-button class="action btnUnpublish" ng-click="setUnpublish()">Unpublish this Version</md-button>                        </div>                        <a ng-if="showRevisionHistory && version" class="btnVersionHistory" href="/Content/Versions/Edit?id={{ model.data.id }}&versionId={{ version.id }}">Revision History</a>                    </md-menu-content>                </md-menu>            </div>'}});