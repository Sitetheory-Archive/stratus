//     Stratus.Directives.Redactor.js 1.0
//     Copyright (c) 2016 by Sitetheory, All Rights Reserved
//
//     All information contained herein is, and remains the
//     property of Sitetheory and its suppliers, if any.
//     The intellectual and technical concepts contained herein
//     are proprietary to Sitetheory and its suppliers and may be
//     covered by U.S. and Foreign Patents, patents in process,
//     and are protected by trade secret or copyright law.
//     Dissemination of this information or reproduction of this
//     material is strictly forbidden unless prior written
//     permission is obtained from Sitetheory.
//
//     For full details and documentation:
//     http://docs.sitetheory.io
!function(e,r){"function"==typeof define&&define.amd?define(["stratus","angular","redactor"],r):r(e.Stratus)}(this,function(e){var r={};angular.module("angular-redactor",[]).constant("redactorOptions",r).directive("redactor",["$timeout",function(t){return[e.BaseUrl+"sitetheorycore/dist/redactor/redactor.css",e.BaseUrl+"sitetheorycore/dist/redactor/redactor-clips.css",e.BaseUrl+"sitetheorystratus/stratus/bower_components/codemirror/lib/codemirror.css"].forEach(function(r){e.Internals.CssLoader(r)}),{restrict:"A",require:"ngModel",link:function(e,a,o,c){e.redactorLoaded=!1;var n,i=function(r){t(function(){e.$apply(function(){c.$setViewValue(r)})})},d={changeCallback:i},s=o.redactor?e.$eval(o.redactor):{};angular.extend(d,r,s);var l=s.changeCallback||r.changeCallback;l&&(d.changeCallback=function(e){i.call(this,e),l.call(this,e)}),t(function(){n=a.redactor(d),c.$render(),a.on("remove",function(){a.off("remove"),a.redactor("core.destroy")})}),c.$render=function(){angular.isDefined(n)&&t(function(){a.redactor("code.set",c.$viewValue||""),a.redactor("placeholder.toggle"),e.redactorLoaded=!0})}}}}])});