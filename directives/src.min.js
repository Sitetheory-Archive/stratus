!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","underscore","angular"],factory):factory(root.Stratus,root._)}(this,function(Stratus,_){Stratus.Directives.Src=function($parse,$log){return{restrict:"A",link:function($scope,$element,$attrs){if(Stratus.Instances[_.uniqueId("src_")]=$scope,$attrs.stratusSrc){var src=$parse($attrs.stratusSrc);$scope.$watch("$parent",function(newValue){"undefined"!=typeof newValue&&$log.log("stratus-src:",src($scope.$parent))})}$log.log("register:",$element),Stratus.RegisterGroup.add("OnScroll",{method:Stratus.Internals.LoadImage,el:$element,spy:$element.data("spy")?$($element.data("spy")):$element})}}}});