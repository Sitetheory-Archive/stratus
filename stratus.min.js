!function(e,t){"function"==typeof define&&define.amd?define(["text","underscore","backbone","bowser","promise"],function(n,s,o,i){return e.Stratus=t(n,s,o,i)}):e.Stratus=t(e.text,e._,e.Backbone,e.bowser)}(this,function(e,t,n,s){t.templateSettings={evaluate:/\{%(.+?)%\}/g,interpolate:/\{\{(.+?)\}\}/g,escape:/\{#(.+?)#\}/g};var o={Settings:{image:{size:{xs:200,s:400,m:600,l:800,xl:1200,hq:1600}},status:{reset:-2,deleted:-1,inactive:0,active:1},consent:{reject:-1,pending:0,accept:1}},DOM:{},Key:{},PostMessage:{},BaseUrl:(requirejs&&t.has(requirejs.s.contexts._,"config")?requirejs.s.contexts._.config.baseUrl:null)||"/",Collections:new n.Model,Models:new n.Model,Routers:new n.Model,Views:{Plugins:{},Widgets:{}},Events:{},Relations:{},Apps:{},Catalog:{},Components:{},Controllers:{},Directives:{},Filters:{},Modules:{ngMaterial:!0,ngMessages:!0},Services:{},Client:s,CSS:{},Chronos:null,Cookies:null,Environment:new n.Model({ip:null,production:!("string"==typeof document.cookie&&document.cookie.indexOf("env=")!==-1),context:null,contextId:null,contextMasterSiteId:null,siteId:null,masterSiteId:null,language:navigator.language,timezone:null,trackLocation:0,trackLocationConsent:0,lat:null,lng:null,postalCode:null,city:null,region:null,country:null,debugNest:!1,liveEdit:!1,viewPortChange:!1,lastScroll:!1}),History:{},Instances:{},Internals:{},Prototypes:{},Resources:{},Roster:{controller:{selector:"[ng-controller]",namespace:"stratus.controllers."},components:{namespace:"stratus.components."},directives:{namespace:"stratus.directives.",type:"attribute"},flex:{selector:"[flex]",require:["angular","angular-material"]},chart:{selector:"[chart]",require:["angular","angular-chart"],module:!0,suffix:".js"},sortable:{selector:"[ng-sortable]",require:["angular-sortable"],module:"ng-sortable"},modules:{selector:["[ng-sanitize]","[froala]"],namespace:"angular-",module:!0},countUp:{selector:["[count-up]","[scroll-spy]"],namespace:"angular-",module:!0,suffix:"Module"}},PluginMethods:{},RegisterGroup:{},Api:{GoogleMaps:"AIzaSyBatGvzPR7u7NZ3tsCy93xj4gEBfytffyA",Froala:"KybxhzguB-7j1jC3A-16y=="}};return o.Environment.get("production")||console.group("Stratus Warm Up"),t.mixin({ucfirst:function(e){return"string"==typeof e&&e?e.charAt(0).toUpperCase()+e.substring(1):null},lcfirst:function(e){return"string"==typeof e&&e?e.charAt(0).toLowerCase()+e.substring(1):null},converge:function(e,n){if("string"!=typeof n&&(n="min"),"min"===n){var s=t.min(e);return t.findKey(e,function(e){return e===s})}if("radial"===n);else if("gauss"!==n)return e},repeat:function(e,t){if("function"==typeof e&&"number"==typeof t){var n;for(n=0;n<t;n++)e()}else console.warn("Underscore cannot repeat function:",e,"with number of times:",t)},hydrate:function(e){return t.isJSON(e)?JSON.parse(e):e},hydrateString:function(e){return t.hydrate(e)},cloneDeep:function(e){if("object"!=typeof e)return e;var n=t.clone(e);return t.each(n,function(e,s){n[s]=t.cloneDeep(e)}),n},extendDeep:function(e,n){var s=t.clone(e);return n&&"object"==typeof n?t.each(n,function(e,o){s&&"object"==typeof s&&(s[o]=o in s?t.extendDeep(s[o],n[o]):n[o])}):s=n,s},getUrlParams:function(e,t){var n={};return t="undefined"!=typeof t?t:window.location.href,t.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,s){n[t]=s}),"undefined"!=typeof e&&e?n[e]:n},allTrue:function(e){return"object"==typeof e&&t.every(e,function(e){return e})},isJSON:function(e){try{JSON.parse(e)}catch(t){return!1}return!0},seconds:function(e){var n=0;if("string"==typeof e){var s=e.match(/([\d+\.]*[\d+])(?=[sSmMhHdDwWyY]+)([sSmMhHdDwWyY]+)/gi);if(t.size(s)){var o,i,r,a=/([\d+\.]*[\d+])(?=[sSmMhHdDwWyY]+)([sSmMhHdDwWyY]+)/i;t.each(s,function(e){if(o=a.exec(e),r=parseFloat(o[1]),i=o[2],!isNaN(r)){switch(o[2]){case"s":i=1;break;case"m":i=60;break;case"h":i=3600;break;case"d":i=86400;break;case"w":i=604800;break;case"y":i=31558149.504;break;default:i=0}n+=r*i}},this)}else n=null}else n="number"==typeof e?e:null;return n},camelToHyphen:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},hyphenToCamel:function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})},snakeToCamel:function(e){return e.replace(/(_\w)/g,function(e){return e[1].toUpperCase()})},startsWith:function(e,t){return e.substr(0,t.length).toUpperCase()==t.toUpperCase()},strcmp:function(e,t){e=e.toString(),t=t.toString();for(var n=0,s=Math.max(e.length,t.length);n<s&&e.charAt(n)===t.charAt(n);++n);return n===s?0:e.charAt(n)>t.charAt(n)?-1:1},truncate:function(e,t,n){t=t||100,n=n||"...";for(var s,o,i,r,a,l=e.replace(/</g,"\n<").replace(/>/g,">\n").replace(/\n\n/g,"\n").replace(/^\n/g,"").replace(/\n$/g,"").split("\n"),u=0,c=[],d=!1,f=0;f<l.length;f++){s=l[f];var h=s.replace(/[ ]+/g," ");if(s.length){if("<"!==s[0])if(u>=t)s="";else if(u+h.length>=t){if(o=t-u," "===s[o-1])for(;o&&(o-=1," "===s[o-1]););else i=s.substring(o).split("").indexOf(" "),i!==-1?o+=i:o=s.length;s=s.substring(0,o)+n,u=t,d=!0}else u+=h.length;else if(u>=t)if(r=s.match(/[a-zA-Z]+/),a=r?r[0]:"")if("</"!==s.substring(0,2))c.push(a),s="";else{for(;c[c.length-1]!==a&&c.length;)c.pop();c.length&&(s=""),c.pop()}else s="";l[f]=s}}return l.join("\n").replace(/\n/g,"")}}),t.isObject($)&&$.fn&&($.fn.isJSON=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},$.fn.dataAttr=function(e,t){return void 0===e&&console.error("$().dataAttr(key, value) contains an undefined key!"),void 0===t?(t=this.attr("data-"+e),$.fn.isJSON(t)?JSON.parse(t):t):this.attr("data-"+e,JSON.stringify(t))},$.fn.notClicked=function(e){return this.selector||console.error("No Selector:",this),!sandbox(e.target).closest(this.selector).length&&!sandbox(e.target).parents(this.selector).length},$.error=function(e){o.meow=this,console.log("error:",this,e)}),o.Internals.LoadEnvironment=function(){var e=document.querySelector("body").getAttribute("data-environment");t.isJSON(e)&&(e=JSON.parse(e)),e&&"object"==typeof e&&t.size(e)&&o.Environment.set(e)},o.Instances.Clean=function(e){return"undefined"==typeof e?console.error("Stratus.Instances.Clean() requires a string or array containing Unique ID(s)."):"string"==typeof e&&(e=[e]),!("object"!=typeof e||!Array.isArray(e))&&void t.each(e,function(e){t.has(o.Instances,e)&&("function"==typeof o.Instances[e].remove&&o.Instances[e].remove(),delete o.Instances[e])})},o.Prototypes.Error=function(e,n){this.code="Internal",this.message="No discernible data received.",this.chain=[],"string"==typeof e?this.message=e:e&&"object"==typeof e&&t.extend(this,e),this.chain.push(n)},o.Prototypes.Dispatch=function(){return t.extend(this,n.Events)},o.Prototypes.Job=function(e,n,s){this.enabled=!1,"string"==typeof e?(this.time=e,this.method=n,this.scope=s):e&&"object"==typeof e&&t.extend(this,e),this.time=t.seconds(this.time),this.scope=this.scope||window},o.Prototypes.Chronos=n.Model.extend({initialize:function(e){o.Environment.get("production")||console.info("Chronos Invoked!"),this.on("change",this.synchronize,this)},synchronize:function(){t.each(this.changed,function(e,n){"string"==typeof n&&n.indexOf(".")!==-1&&(n=t.first(n.split(".")),e=this.get(n)),!e.code&&e.enabled?e.code=setInterval(function(e){e.method.call(e.scope)},1e3*e.time,e):e.code&&!e.enabled&&(clearInterval(e.code),e.code=0)},this)},add:function(e,n,s){var i=null,r=new o.Prototypes.Job(e,n,s);return null!==r.time&&"function"==typeof r.method&&(i=t.uniqueId("job_"),this.set(i,r),o.Instances[i]=r),i},enable:function(e){var t=this.has(e);return t&&this.set(e+".enabled",!0),t},disable:function(e){var t=this.has(e);return t&&this.set(e+".enabled",!1),t},toggle:function(e,t){var n=this.has(e);return n&&this.set(e+".enabled","boolean"==typeof t?t:!this.get(e+".enabled")),n}}),o.Chronos=new o.Prototypes.Chronos,o.Prototypes.Cookies=n.Model.extend({initialize:function(e){o.Environment.get("production")||console.info("Cookie Manager Invoked!")},retrieve:function(e){var t=new RegExp("(?:^"+e+"|;\\s*"+e+")=(.*?)(?:;|$)","g"),n=t.exec(document.cookie);return null===n?null:n[1]},create:function(e,t,n,s,o){var i=e+"="+escape(t)+";";n&&(n instanceof Date?isNaN(n.getTime())&&(n=new Date):n=new Date((new Date).getTime()+1e3*parseInt(n)*60*60*24),i+="expires="+n.toGMTString()+";"),s&&(i+="path="+s+";"),o&&(i+="domain="+o+";"),document.cookie=i},remove:function(e){this.retrieve(e)&&this.create(e,"",-1)}}),o.Cookies=new o.Prototypes.Cookies,o.Prototypes.Collection=function(e){return this.attributes={},this.temps={},this.toObject=function(e){return t.clone(this.attributes)},this.toJSON=function(e){return t.clone(this.attributes)},this.each=function(e,n){t.each.apply(void 0===n?this:n,t.union([this.attributes],arguments))},this.get=function(e){if("string"==typeof e&&e.indexOf(".")!==-1){var n=this.attributes,s=e.split(".");if(t.find(s,function(t){return"undefined"!=typeof n&&n&&"object"==typeof n?void(n=n[t]):(n=this.attributes[e],!0)},this),!t.isEqual(n,this.attributes))return n}return this.attributes[e]},this.has=function(e){return"undefined"!=typeof this.get(e)},this.size=function(){return t.size(this.attributes)},this.set=function(e,n){e&&"object"==typeof e?t.each(e,function(e,t){this.setAttribute(t,e)},this):this.setAttribute(e,n)},this.setAttribute=function(e,n){if("string"==typeof e&&e.indexOf(".")!==-1){var s=this.attributes,o=e.split(".");if(t.find(t.initial(o),function(e){return t.has(s,e)&&s[e]||(s[e]={}),"undefined"!=typeof s&&s&&"object"==typeof s?void(s=s[e]):(s=this.attributes,!0)},this),!t.isEqual(s,this.attributes)){var i=t.last(o);s&&"object"==typeof s&&(s[i]=n)}}else this.attributes[e]=n},this.temp=function(e,n){this.set(e,n),e&&"object"==typeof e?t.each(e,function(e,t){this.temps[t]=e},this):this.temps[e]=n},this.add=function(e,n){if(this.has(e)||this.set(e,[]),"undefined"!=typeof n&&!t.contains(this.attributes[e],n))return this.attributes[e].push(n),n},this.remove=function(e,n){return void 0===n||(this.attributes[e]=t.without(this.attributes[e],n)),this.attributes[e]},this.iterate=function(e){return this.has(e)||this.set(e,0),++this.attributes[e]},this.clear=function(){for(var e in this.attributes)this.attributes.hasOwnProperty(e)&&delete this.attributes[e]},this.clearTemp=function(){for(var e in this.temps)this.temps.hasOwnProperty(e)&&delete this.temps[e]},this.initialize=function(){return!0},this.initialize.apply(this,arguments),this},o.Internals.Ajax=function(e){this.method="GET",this.url="/Api",this.data={},this.type="",this.success=function(e){return e},this.error=function(e){return e},t.extend(this,e);var n=this;this.xhr=new XMLHttpRequest;var s=new Promise(function(e,s){n.xhr.open(n.method,n.url,!0),"string"==typeof n.type&&n.type.length&&n.xhr.setRequestHeader("Content-Type",n.type),n.xhr.onload=function(){if(n.xhr.status>=200&&n.xhr.status<400){var o=n.xhr.responseText;t.isJSON(o)&&(o=JSON.parse(o)),e(o)}else s(n.xhr)},n.xhr.onerror=function(){s(n.xhr)},Object.keys(n.data).length?n.xhr.send(JSON.stringify(n.data)):n.xhr.send()});return s.then(n.success,n.error),s},o.Prototypes.Sentinel=function(){return this.view=!1,this.create=!1,this.edit=!1,this["delete"]=!1,this.publish=!1,this.design=!1,this.dev=!1,this.master=!1,this.zero=function(){t.extend(this,{view:!1,create:!1,edit:!1,"delete":!1,publish:!1,design:!1,dev:!1,master:!1})},this.permissions=function(e){if(isNaN(e)){var n=0;return n+=this.view?1:0,n+=this.create?2:0,n+=this.edit?4:0,n+=this["delete"]?8:0,n+=this.publish?16:0,n+=this.design?32:0,n+=this.dev?64:0,n+=this.master?128:0}t.each(e.toString(2).split("").reverse(),function(e,t){if("1"==e)switch(t){case 0:this.view=!0;break;case 1:this.create=!0;break;case 2:this.edit=!0;break;case 3:this["delete"]=!0;break;case 4:this.publish=!0;break;case 5:this.design=!0;break;case 6:this.dev=!0;break;case 7:this.view=!0,this.create=!0,this.edit=!0,this["delete"]=!0,this.publish=!0,this.design=!0,this.dev=!0,this.master=!0}},this)},this.summary=function(){var e=[];return t.each(this,function(n,s){"boolean"==typeof n&&n&&e.push(t.ucfirst(s))}),e},this},o.Internals.LoadCss=function(e){return new Promise(function(n,s){"undefined"!=typeof e&&"function"!=typeof e||s(new o.Prototypes.Error({code:"LoadCSS",message:"CSS Resource URLs must be defined as a String, Array, or Object."},this)),"string"==typeof e&&(e=[e]);var i={total:e.length,iteration:0};i.total>0?t.each(e.reverse(),function(e){i.iteration++;var r=t.uniqueId("css_");i[r]=!1,"undefined"!=typeof e&&e?o.Internals.CssLoader(e).then(function(e){i[r]=!0,i.total===i.iteration&&t.allTrue(i)&&n(i)},s):(i[r]=!0,i.total===i.iteration&&t.allTrue(i)&&n(i))}):s(new o.Prototypes.Error({code:"LoadCSS",message:"No CSS Resource URLs found!"},this))})},o.Internals.OnScroll=t.once(function(e){o.Environment.on("change:viewPortChange",function(e){if(e.get("viewPortChange")){e.set("lastScroll",o.Internals.GetScrollDir());var n=o.RegisterGroup.get("OnScroll");t.each(n,function(e){"undefined"!=typeof e&&t.has(e,"method")&&e.method(e)}),e.set("viewPortChange",!1),e.set("windowTop",$(window).scrollTop())}}),$(window).scroll(function(){o.Environment.get("viewPortChange")===!1&&o.Environment.set("viewPortChange",!0)}),$(window).resize(function(){o.Environment.get("viewPortChange")===!1&&o.Environment.set("viewPortChange",!0)}),o.Environment.set("viewPortChange",!0)}),o.Internals.GetScrollDir=function(){var e=$(window).scrollTop(),t=o.Environment.get("windowTop"),n=$(window).height(),s=$(document).height(),i=!!t&&e>t,r=!!t&&(e<t&&e+n<s);return i?"down":!!r&&"up"},o.Internals.IsOnScreen=function(e,t){t=t||0;var n=$(window).scrollTop(),s=n+$(window).height(),o=e.offset()?e.offset().top:null,i=o+e.height();return i>=n+t&&o<=s-t},o.Internals.Anchor=n.View.extend({el:'a[href*=\\#]:not([href=\\#]):not([data-scroll="false"])',events:{click:"clickAction"},clickAction:function(e){if(location.pathname.replace(/^\//,"")===e.currentTarget.pathname.replace(/^\//,"")&&location.hostname===e.currentTarget.hostname){var s=["new","filter","page","version"],o=t.every(s,function(n){return!t.startsWith(e.currentTarget.hash,"#"+n)},this);if(o){var i=$(e.currentTarget.hash),r=e.currentTarget.hash.slice(1);if(i=i.length?i:$("[name="+r+"]"),i.length)return $("html,body").animate({scrollTop:i.offset().top},1e3,function(){n.history.navigate(r)}),!1}}}}),o.Internals.LazyLoad=n.View.extend({el:"img[data-src]",initialize:function(){if(0===this.$el.length)return!1;var e;t.each(this.$el,function(t){e=$(t),o.RegisterGroup.add("OnScroll",{method:o.Internals.LoadImage,el:e,spy:e.data("spy")?$(e.data("spy")):e})})}}),o.Internals.LoadImage=function(e){e.el.addClass("placeholder"),o.Internals.IsOnScreen(e.spy)&&!e.el.dataAttr("loading")&&(e.el.dataAttr("loading",!0),o.DOM.complete(function(){var n=e.el.data("hd");n="undefined"==typeof n||(t.isJSON(n)?JSON.parse(n):n);var s=e.el.data("src");"lazy"===s&&(s=e.el.attr("src"));var i=null;if(e.el.data("size")&&i.indexOf(e.el.data("size"))!==!1)i=e.el.data("size");else{var r=null,a=null,l=null;if(e.el.prop("style").width?r=e.el.prop("style").width:e.el.attr("width")&&(r=e.el.attr("width")),r){var u=/([\d]+)(.*)/;r=u.exec(r),a=r[2],r=parseInt(r[1]),l="%"===a?r/100:null}if(!r||"%"===a){var c=e.el.data("ignorevisibility")?null:":visible",d=$(t.first(e.el.parents(c)));r=d.width();var f=$(t.first(d.find('[class*="col-"]')));if(f.length>0){var h=o.Internals.GetColWidth(f);h&&(r=Math.round(r/h))}l&&(r=Math.round(r*l))}if(r<=0)return e.el.dataAttr("loading",!1),setTimeout(function(){o.Internals.LoadImage(e)},500),!1;n&&(r=2*r),i=t.findKey(o.Settings.image.size,function(e){var t=e/r;return.85<t&&t<1.15||e>r}),i=i||"hq"}var p=/^(.+?)(-[A-Z]{2})?\.(?=[^.]*$)(.+)/gi,g=p.exec(s);s=g[1]+"-"+i+"."+g[3],e.el.attr("src",s),e.el.addClass("loading"),e.el.load(function(){$(this).addClass("loaded").removeClass("placeholder loading")}),o.RegisterGroup.remove("OnScroll",e)}))},o.Internals.GetColWidth=function(e){var t=e.attr("class"),n=/col-.{2}-([0-9]*)/g,s=n.exec(t);return"undefined"!=typeof s[1]&&s[1]},o.Internals.Location=function(e){return new Promise(function(n,s){"geolocation"in navigator?(e=t.extend({enableHighAccuracy:!0,timeout:2e4,maximumAge:5e4},e||{}),navigator.geolocation.getCurrentPosition(n,s,e)):s(new o.Prototypes.Error({code:"Location",message:"HTML5 Geo-Location isn't supported on this browser."},this))})},o.Internals.CssLoader=function(e){return new Promise(function(t,n){if(e in o.CSS)o.CSS[e]?t():o.Events.once("onload:"+e,t);else{o.CSS[e]=!1;var s=document.createElement("link");s.type="text/css",s.rel="stylesheet",s.href=e,o.Events.once("onload:"+e,function(){o.CSS[e]=!0,t()}),"onload"in s&&!o.Client.android?s.onload=function(){o.Events.trigger("onload:"+e)}:(o.CSS[e]=!0,o.Events.trigger("onload:"+e)),$("head").prepend(s)}})},o.Internals.Convoy=function(e,n){return new Promise(function(s,i){return void 0===e&&i(new o.Prototypes.Error({code:"Convoy",message:"No Convoy defined for dispatch."},this)),t.isUndefined($)?void i("jQuery is not defined."):void $.ajax({type:"POST",url:"/Api"+encodeURIComponent(n||""),data:{convoy:JSON.stringify(e)},dataType:t.has(e,"meta")&&t.has(e.meta,"dataType")?e.meta.dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*"},success:function(e){return s(e),e},error:function(e){return i(new o.Prototypes.Error({code:"Convoy",message:e},this)),e}})})},o.Internals.Api=function(e,n,s){return void 0===e&&(e="Default"),void 0!==n&&null!==n||(n={}),void 0===s&&(s={}),"object"!=typeof n&&(n={method:n}),t.has(n,"method")||(n.method="GET"),o.Internals.Convoy({route:{controller:e},meta:n,payload:s})},o.Internals.Resource=function(e,n){return new Promise(function(s,i){if("undefined"==typeof e&&i(new o.Prototypes.Error({code:"Resource",message:"Resource path is not defined."},this)),t.has(o.Resources,e))o.Resources[e].success?s(o.Resources[e].data):o.Events.once("resource:"+e,s);else{o.Resources[e]={success:!1,data:null},o.Events.once("resource:"+e,s);var r={path:e,dataType:"text"};void 0!==n&&(r.elementId=n),o.Internals.Api("Resource",r,{}).then(function(t){o.Resources[e].success=!0,o.Resources[e].data=t,o.Events.trigger("resource:"+e,t)},i)}})},o.Internals.Compatibility=function(){var e=[];o.Client.android?e.push("android"):o.Client.ios?e.push("ios"):o.Client.mac?e.push("mac"):o.Client.windows?e.push("windows"):o.Client.linux?e.push("linux"):e.push("os"),o.Client.chrome?e.push("chrome"):o.Client.firefox?e.push("firefox"):o.Client.safari?e.push("safari"):o.Client.opera?e.push("opera"):o.Client.msie?e.push("msie"):o.Client.iphone?e.push("iphone"):e.push("browser"),o.Client.version&&e.push("version"+o.Client.version.split(".")[0]),o.Client.mobile?e.push("mobile"):o.Client.tablet?e.push("tablet"):e.push("desktop"),$("body").addClass(e.join(" "))},o.Internals.View=n.Model.extend({toObject:function(){return t.clone(this.attributes)},hydrate:function(){var e=this.get("el");if(this.set({uid:t.uniqueId("view_"),guid:"undefined"!=typeof e.dataAttr("guid")?e.dataAttr("guid"):null,entity:"undefined"!=typeof e.dataAttr("entity")?t.ucfirst(e.dataAttr("entity")):null,id:"undefined"!=typeof e.dataAttr("id")?e.dataAttr("id"):null,manifest:"undefined"!=typeof e.dataAttr("manifest")?e.dataAttr("manifest"):null,api:"undefined"!=typeof e.dataAttr("api")?e.dataAttr("api"):null,fetch:"undefined"==typeof e.dataAttr("fetch")||e.dataAttr("fetch"),target:"undefined"!=typeof e.dataAttr("target")?e.dataAttr("target"):null,prototype:"undefined"!=typeof e.dataAttr("prototype")?e.dataAttr("prototype"):null,autoSave:"undefined"!=typeof e.dataAttr("autoSave")?e.dataAttr("autoSave"):null,type:"undefined"!=typeof e.dataAttr("type")?e.dataAttr("type"):null,types:"undefined"!=typeof e.dataAttr("types")?e.dataAttr("types"):null,template:"undefined"!=typeof e.dataAttr("template")?e.dataAttr("template"):null,templates:"undefined"!=typeof e.dataAttr("templates")?e.dataAttr("templates"):null,dialogue:"undefined"!=typeof e.dataAttr("dialogue")?e.dataAttr("dialogue"):null,pagination:"undefined"!=typeof e.dataAttr("pagination")?e.dataAttr("pagination"):null,property:"undefined"!=typeof e.dataAttr("property")?e.dataAttr("property"):null,field:"undefined"!=typeof e.dataAttr("field")?e.dataAttr("field"):null,load:"undefined"!=typeof e.dataAttr("load")?e.dataAttr("load"):null,options:"undefined"!=typeof e.dataAttr("options")?e.dataAttr("options"):null,versionEntity:"undefined"!=typeof e.dataAttr("versionentity")?e.dataAttr("versionentity"):null,versionRouter:"undefined"!=typeof e.dataAttr("versionrouter")?e.dataAttr("versionrouter"):null,versionId:"undefined"!=typeof e.dataAttr("versionid")?e.dataAttr("versionid"):null,plugin:"undefined"!=typeof e.dataAttr("plugin")?e.dataAttr("plugin"):null,plugins:[]}),null!==this.get("plugin")){var n=this.get("plugin").split(" ");null!==this.get("type")?this.set("plugins",n.length>1?n:[this.get("plugin")]):n.length>1&&(this.set("plugin",t.first(n)),this.set("plugins",t.rest(n)))}var s=this.get("id"),o=null!==this.get("type")?this.get("type"):this.get("plugin"),i=null!==this.get("type")?"widgets":"plugins";this.set({scope:null!==s?"model":"collection",alias:null!==o?"stratus.views."+i+"."+o.toLowerCase():null,path:null!==o?o:null}),this.isNew()&&null!==this.get("entity")&&null!==this.get("manifest")&&this.set("scope","model")},clean:function(){this.has("entity")&&"none"!==this.get("entity").toLowerCase()||this.set({entity:null,scope:null})},nest:function(){var e={entity:this.get("entity"),id:this.get("id"),versionEntity:this.get("versionEntity"),versionRouter:this.get("versionRouter"),versionId:this.get("versionId"),scope:this.get("scope"),manifest:this.get("manifest")};return this.has(e.scope)&&(e[e.scope]=this.get(e.scope)),e},modelAttributes:function(){return{id:this.get("id")}}}),o.Internals.AngularLoader=function(){var e,n,s=[],i=[];t.forEach(o.Roster,function(o,r){if("object"==typeof o&&o)if(t.isUndefined(o.selector)&&o.namespace&&(o.selector=t.filter(t.map(requirejs.s.contexts._.config.paths,function(e,n){return t.startsWith(n,o.namespace)?("attribute"===o.type?"[":"")+t.camelToHyphen(n.replace(o.namespace,"stratus-"))+("attribute"===o.type?"]":""):null}))),t.isArray(o.selector))o.length=0,t.forEach(o.selector,function(r){if(n=document.querySelectorAll(r),o.length+=n.length,n.length){var a=r.replace("[","").replace("]","");e=o.namespace+t.lcfirst(t.hyphenToCamel(a.replace("stratus","").replace("ng",""))),t.has(requirejs.s.contexts._.config.paths,e)&&(s.push(e),o.module&&i.push(t.isString(o.module)?o.module:t.lcfirst(t.hyphenToCamel(a+(o.suffix||"")))))}});else if(t.isString(o.selector)&&(n=document.querySelectorAll(o.selector),o.length=n.length,n.length)){var a=o.selector.replace("[","").replace("]","");o.namespace?t.forEach(n,function(n){var i=n.getAttribute(a);i&&(e=o.namespace+t.lcfirst(t.hyphenToCamel(i.replace("Stratus",""))),t.has(requirejs.s.contexts._.config.paths,e)&&s.push(e))}):o.require&&(s=t.union(s,o.require),o.module&&i.push(t.isString(o.module)?o.module:t.lcfirst(t.hyphenToCamel(a+(o.suffix||"")))))}}),s.push("angular-material"),s=t.uniq(s),window.requirements=s,s.length&&((t.contains(s,"angular-froala")||t.contains(s,"stratus-froala"))&&["codemirror/mode/htmlmixed/htmlmixed","codemirror/addon/edit/matchbrackets","codemirror","froala-align","froala-code-beautifier","froala-code-view","froala-draggable","froala-entities","froala-file","froala-forms","froala-fullscreen","froala-help","froala-image","froala-image-manager","froala-inline-style","froala-link","froala-lists","froala-paragraph-format","froala-paragraph-style","froala-quick-insert","froala-quote","froala-table","froala-url","froala-video","froala-word-paste"].forEach(function(e){s.push(e)}),["stratus.filters.map","stratus.filters.moment","stratus.filters.reduce","stratus.filters.truncate","stratus.filters.gravatar"].forEach(function(e){s.push(e)}),require(s,function(){if(angular.module("stratusApp",t.union(Object.keys(o.Modules),i)).config(["$sceDelegateProvider",function(e){var n=["self","http://*.sitetheory.io/**","https://*.sitetheory.io/**"];boot.host&&(t.startsWith(boot.host,"//")?t.each(["https:","http:"],function(e){n.push(e+boot.host+"/**")}):n.push(boot.host+"/**")),e.resourceUrlWhitelist(n)}]),t.isDefined($)&&$.FroalaEditor){$.FroalaEditor.DEFAULTS.key=o.Api.Froala;var e=["bold","italic","underline","strikeThrough","subscript","superscript","|","formatBlock","blockStyle","inlineStyle","paragraphStyle","paragraphFormat","align","formatOL","formatUL","outdent","indent","|","insertLink","insertImage","insertVideo","insertFile","insertTable","|","undo","redo","removeFormat","wordPaste","help","html","fullscreen"];angular.module("stratusApp").value("froalaConfig",{codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:"['p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'pre', 'ul', 'ol', 'table', 'dl']",brace_style:"expand",indent_char:" ",indent_size:4,wrap_line_length:0},codeMirror:!0,codeMirrorOptions:{indentWithTabs:!1,lineNumbers:!0,lineWrapping:!0,mode:"text/html",tabMode:"space",tabSize:4},fileUploadURL:"https://app.sitetheory.io:3000/?session="+o.Cookies.retrieve("SITETHEORY"),htmlAllowedAttrs:[".*"],htmlAllowedEmptyTags:["textarea","a",".fa","iframe","object","video","style","script","div"],htmlAllowedTags:[".*"],htmlRemoveTags:[""],htmlUntouched:!0,imageManagerPageSize:20,imageManagerScrollOffset:10,imageManagerLoadURL:"/Api/Media?payload-only=true",imageManagerLoadMethod:"GET",imageManagerDeleteMethod:"DELETE",multiLine:!0,pasteDeniedAttrs:[""],pasteDeniedTags:[""],pastePlain:!1,toolbarSticky:!1,toolbarButtons:e,toolbarButtonsMD:e,toolbarButtonsSM:e,toolbarButtonsXS:e})}angular.forEach(o.Services,function(e){angular.module("stratusApp").config(e)}),angular.forEach(o.Components,function(e,n){angular.module("stratusApp").component("stratus"+t.ucfirst(n),e)}),angular.forEach(o.Directives,function(e,n){angular.module("stratusApp").directive("stratus"+t.ucfirst(n),e)}),angular.forEach(o.Filters,function(e,n){angular.module("stratusApp").filter(t.lcfirst(n),e)}),angular.forEach(o.Controllers,function(e,t){angular.module("stratusApp").controller("Stratus"+t,e),angular.module("stratusApp").controller(t,e)});var n=[],s=t.map(document.querySelectorAll("link[satisfies]"),function(e){return e.getAttribute("satisfies")});if(t.contains(s,"angular-material.css")||n.push(o.BaseUrl+"sitetheorystratus/stratus/bower_components/angular-material/angular-material"+(o.Environment.get("production")?".min":"")+".css"),(document.querySelectorAll("[froala]").length||document.querySelectorAll("[stratus-froala]").length)&&[o.BaseUrl+"sitetheorycore/css/sitetheory.codemirror.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/codemirror/lib/codemirror.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/froala_editor.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/froala_style.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/plugins/code_view.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/plugins/draggable.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/plugins/file.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/plugins/fullscreen.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/plugins/help.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/plugins/image.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/plugins/image_manager.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/plugins/quick_insert.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/plugins/special_characters.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/plugins/table.min.css",o.BaseUrl+"sitetheorystratus/stratus/bower_components/froala-wysiwyg-editor/css/plugins/video.min.css"].forEach(function(e){n.push(e)}),n.length){angular.forEach(n,function(e){o.Internals.CssLoader(e).then(function(){})})}angular.bootstrap(document.querySelector("html"),["stratusApp"])}))},o.Internals.Loader=function(e,n,s){if("undefined"==typeof e){var i=$("body");e=i.dataAttr("loaded")?null:"[data-entity],[data-plugin]",e?i.dataAttr("loaded",!0):console.warn("Attempting to load Stratus root repeatedly!")}return e&&(e=n&&e&&"object"==typeof e?$(e).find("[data-type],[data-plugin]"):$(e)),new Promise(function(i,r){var a={total:e&&"object"==typeof e?e.length:0,iteration:0,views:{}};a.total>0?e.each(function(e,l){a.iteration++;var u=t.uniqueId("entry_");a.views[u]=!1,o.Internals.ViewLoader(l,n,s).then(function(e){a.views[u]=e,a.total===a.iteration&&t.allTrue(a.views)&&i(a)},r)}):i(a)})},o.Internals.ViewLoader=function(e,n,s){var i=n?n:null,r=!1,a=$(e);if(n=new o.Internals.View({el:a}),n.hydrate(),i&&(n.has("entity")?r=!0:n.set(i.nest())),n.clean(),!r){"undefined"==typeof s&&(s=["stratus"]);var l=n.get("template"),u=n.get("templates"),c=n.get("dialogue"),d=[];if(null!==n.get("scope")&&s.push("stratus."+n.get("scope")+"s.generic"),n.get("alias")&&t.has(requirejs.s.contexts._.config.paths,n.get("alias")))s.push(n.get("alias"));else if(n.get("path")){s.push(n.get("path"));var f=/(?=[^\/]*$)([a-zA-Z]+)/i,h=f.exec(n.get("path"));n.set("type",t.ucfirst(h[1]))}else n.set({type:null,alias:null,path:null});if(null!==l&&(u=t.extend(null!==u?u:{},{combined:l})),null!==c&&(u=t.extend(null!==u?u:{},{dialogue:c})),null!==u){for(var p in u)if(u.hasOwnProperty(p)&&"function"!=typeof u[p])if(0===u[p].indexOf("#")){var g=$(u[p]);g.length>0&&(u[p]=g.html())}else u[p]in requirejs.s.contexts._.config.paths?(s.push("text!"+u[p]),d.push(p)):(s.push("text!"+u[p]),d.push(p));n.set("templates",u),u=n.get("templates")}}return new Promise(function(e,i){return n.get("guid")?(o.Environment.get("production")||console.warn("View hydration halted on",n.get("guid"),"due to repeat calls on the same element.",n.toObject()),e(!0),!0):r?(e(!0),!0):void require(s,function(o){!o.Environment.get("production")&&o.Environment.get("nestDebug")&&console.group("Stratus View");var r=0;if(u&&d.length>0)for(var a=0;a<arguments.length;a++)"string"==typeof arguments[a]&&(arguments[a].indexOf("<html")===-1?u[d[r]]=arguments[a]:console.error("Template",u[d[r]],"failed to load."),r++);n.set("templates",u),u=n.get("templates");var l=[];if(t.size(u)>0){var c=/<.+?data-type=["|'](.+?)["|'].*>/gi;t.each(u,function(e,s){if("string"==typeof e){if(e.search(c)!==-1)for(var i=c.exec(e);null!==i;){var r="stratus.views."+(n.get("plugin")?"plugins":"widgets")+"."+i[1].toLowerCase();r&&!t.has(requirejs.s.contexts._.config.paths,r)&&(o.Environment.get("production")||console.warn("Sub Type:",r,"not configured in require.js")),l.push(r),i=c.exec(e)}u[s]=t.template(e)}}),n.set("templates",u),u=n.get("templates")}n.get("plugins").length&&t.each(n.get("plugins"),function(e){l.push("stratus.views.plugins."+e.toLowerCase())});var f=[];null!==n.get("plugin")&&f.push("PluginLoader"),null!==n.get("type")&&f.push("WidgetLoader"),f.length||f.push("WidgetLoader"),t.each(f,function(r){0===t.size(l)?o.Internals[r](e,i,n,s):(s=t.union(s,l),new Promise(function(e,t){require(s,function(o){o.Internals[r](e,t,n,s)})}).then(e,i))})})})},o.Internals.WidgetLoader=function(e,n,s,i){if("model"===s.get("scope")){o.Models.has(s.get("entity"))||o.Models.set(s.get("entity"),o.Models.Generic.extend({}));var r,a,l=!1,u=o.Models.has(s.get("entity"))?o.Models.get(s.get("entity")):null;!s.get("id")&&s.get("manifest")?(a=s.get("entity")+"Manifest",r=o.Instances[a],r||(o.Instances[a]=new u,r=o.Instances[a],l=!0)):u&&t.has(u,"findOrCreate")?(r=u.findOrCreate(s.get("id")),r||(r=new u(s.modelAttributes()),l=!0)):(a=s.get("entity")+s.get("id"),r=o.Instances[a],r||(o.Instances[a]=new u(s.modelAttributes()),r=o.Instances[a],l=!0)),l&&r.safeInitialize(s.toObject()),s.set({model:r})}else if("collection"===s.get("scope")){o.Collections.has(s.get("entity"))||o.Collections.set(s.get("entity"),new o.Collections.Generic(s.toObject()));
var c=o.Collections.get(s.get("entity"));!c.initialized&&s.get("fetch")&&c.safeInitialize(s.toObject()),s.set({collection:c})}if(null!==s.get("type")){var d=t.ucfirst(s.get("type"));if("undefined"!=typeof o.Views.Widgets[d]){var f=s.toObject();f.view=s,o.Instances[s.get("uid")]=new o.Views.Widgets[d](f),o.Instances[s.get("uid")].$el.attr("data-guid",s.get("uid")),t.has(o.Instances[s.get("uid")],"promise")?o.Instances[s.get("uid")].initializer.then(e,n):e(o.Instances[s.get("uid")])}else o.Environment.get("production")||console.warn("Stratus.Views.Widgets."+d+" is not correctly configured."),n(new o.Prototypes.Error({code:"WidgetLoader",message:"Stratus.Views.Widgets."+d+" is not correctly configured."},s.toObject()));!o.Environment.get("production")&&o.Environment.get("nestDebug")&&console.groupEnd()}else{var h=s.get("el").find("[data-type],[data-plugin]");h.length>0?o.Internals.Loader(s.get("el"),s,i).then(function(t){!o.Environment.get("production")&&o.Environment.get("nestDebug")&&console.groupEnd(),e(t)},function(e){!o.Environment.get("production")&&o.Environment.get("nestDebug")&&console.groupEnd(),n(new o.Prototypes.Error(e,h))}):!o.Environment.get("production")&&o.Environment.get("nestDebug")?(console.warn("No Innate or Nested Type Found:",s.toObject()),e(s.toObject()),console.groupEnd()):e(s.toObject())}},o.Internals.PluginLoader=function(e,n,s,i){var r=t.union([s.get("plugin")],s.get("plugins"));t.each(r,function(i){if(i=t.ucfirst(i),"undefined"!=typeof o.Views.Plugins[i]){var r=s.toObject();r.view=s,o.Instances[s.get("uid")]=new o.Views.Plugins[i](r),o.Instances[s.get("uid")].$el.attr("data-guid",s.get("uid")),t.has(o.Instances[s.get("uid")],"promise")?o.Instances[s.get("uid")].initializer.then(e,n):e(o.Instances[s.get("uid")])}else o.Environment.get("production")||console.warn("Stratus.Views.Plugins."+i+" is not correctly configured."),n(new o.Prototypes.Error({code:"PluginLoader",message:"Stratus.Views.Plugins."+i+" is not correctly configured."},s.toObject()))})},o.Internals.SetUrlParams=function(e,n){if("undefined"==typeof n&&(n=window.location.href),t.isUndefined($))return console.error("jQuery is not defined."),n;var s={},o=n.indexOf("?");return n.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,n){s[t]=n}),s=t.extend(s,e),n=o>=0?n.substring(0,o):n,n+="?"+$.param(s)},o.Internals.UpdateEnvironment=function(e){return e||(e={}),!("string"!=typeof document.cookie||!o.Cookies.retrieve("SITETHEORY"))&&void("object"==typeof e&&Object.keys(e).length&&o.Internals.Ajax({method:"PUT",url:"/Api/Session",data:e,type:"application/json",success:function(e){var n=e.payload||e;"object"==typeof n&&t.forEach(Object.keys(n),function(e){o.Environment.set(e,n[e])})},error:function(e){console.error("error:",e)}}))},o.Internals.TrackLocation=function(){var e={};!o.Environment.has("timezone"),e.timezone=(new Date).toString().match(/\((.*)\)/)[1],o.Environment.get("trackLocation")?o.Environment.get("trackLocationConsent")?o.Internals.Location().then(function(t){e.lat=t.coords.latitude,e.lng=t.coords.longitude,o.Environment.set("lat",t.coords.latitude),o.Environment.set("lng",t.coords.longitude),o.Internals.UpdateEnvironment(e)},function(e){console.error("Stratus Location:",e)}):o.Internals.Ajax({url:"https://ipapi.co/"+o.Environment.get("ip")+"/json/",success:function(t){t||(t={}),"object"==typeof t&&Object.keys(t).length&&t.postal&&(e.postalCode=t.postal,e.lat=t.latitude,e.lng=t.longitude,e.city=t.city,e.region=t.region,e.country=t.country,o.Internals.UpdateEnvironment(e))}}):o.Internals.UpdateEnvironment(e)},o.PostMessage.Convoy=function(e){window.addEventListener("message",e,!1)},o.PostMessage.Convoy(function(e){if("https://auth.sitetheory.io"!==e.origin&&"http://admin.sitetheory.io"!==e.origin)return!1;var t=JSON.parse(e.data);t.meta.session&&t.meta.session!==o.Cookies.retrieve("SITETHEORY")&&(o.Cookies.create("SITETHEORY",t.meta.session,{expires:365,path:"/"}),o.Client.safari||location.reload(!0))}),o.DOM.ready=function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},o.DOM.complete=function(e){"complete"===document.readyState?e():window.addEventListener("load",e)},o.DOM.unload=function(e){window.addEventListener("beforeunload",e)},o.Key.Enter=13,o.Key.Escape=27,t.extend(o.Events,n.Events),o.Events.on("initialize",function(){o.Environment.get("production")||(console.groupEnd(),console.group("Stratus Initialize")),o.Internals.LoadEnvironment(),o.Internals.Compatibility(),o.RegisterGroup=new o.Prototypes.Collection,o.Internals.TrackLocation(),o.Internals.AngularLoader(),o.Internals.Loader().then(function(e){o.Environment.get("production")||console.info("Views:",e),o.Events.on("finalize",function(e){n.History.started||n.history.start(),o.Events.trigger("finalized",e)}),o.Events.trigger("finalize",e)},function(e){console.error("Stratus Loader:",e)})}),o.Events.on("finalize",function(){o.Environment.get("production")||(console.groupEnd(),console.group("Stratus Finalize")),new o.Internals.Anchor,new o.Internals.LazyLoad,o.RegisterGroup.size&&o.RegisterGroup.each(function(e,n){t.has(o.Internals,n)&&o.Internals[n](e)})}),o.Events.on("terminate",function(){o.Environment.get("production")||(console.groupEnd(),console.group("Stratus Terminate"))}),o.Prototypes.Bootbox=function(e,n){e&&"object"==typeof e?(t.extend(this,e),this.message=this.message||"Message"):this.message=e||"Message",this.handler=this.handler||n,"function"!=typeof this.handler&&(this.handler=function(e){console.info("Client "+(void 0===e?"closed":e?"confirmed":"cancelled")+" dialog.")})},o.Events.on("alert",function(e,t){e instanceof o.Prototypes.Bootbox||(e=new o.Prototypes.Bootbox(e,t)),"undefined"!=typeof bootbox?bootbox.alert(e.message,e.handler):(alert(e.message),e.handler())}),o.Events.on("confirm",function(e,t){e instanceof o.Prototypes.Bootbox||(e=new o.Prototypes.Bootbox(e,t)),"undefined"!=typeof bootbox?bootbox.confirm(e.message,e.handler):t(confirm(e.message))}),o.Prototypes.Toast=function(e,n,s,o){e&&"object"==typeof e?(t.extend(this,e),this.message=this.message||"Message"):this.message=e||"Message",this.title=this.title||n||"Toast",this.priority=this.priority||s||"danger",this.settings=this.settings||o,this.settings&&"object"==typeof this.settings||(this.settings={}),this.settings.timeout=this.settings.timeout||1e4},o.Events.on("toast",function(e,t,n,s){e instanceof o.Prototypes.Toast||(e=new o.Prototypes.Toast(e,t,n,s)),"undefined"!=typeof $&&$.toaster?$.toaster(e):o.Events.trigger("alert",e.message)}),o.DOM.ready(function(){$("body").removeClass("loaded unloaded").addClass("loading"),o.Events.trigger("initialize")}),o.DOM.complete(function(){$("body").removeClass("loading unloaded").addClass("loaded")}),o.DOM.unload(function(e){$("body").removeClass("loading loaded").addClass("unloaded"),o.Events.trigger("terminate",e)}),o});